import{S as Ie,i as je,s as Ae,e as y,a5 as Ue,c as ee,a as fe,d,aa as Ve,b as Ce,a4 as ae,ab as be,A as Ye,E as B,F as K,a1 as ie,j as h,k as F,m as v,n as G,o as w,f as E,O as Pe,G as L,x as $,u as m,v as T,a2 as oe,l as Se,r as ze,w as Fe,az as Ge,ak as De,am as pe,an as $e,aA as Me,B as He,t as ce,g as _e,af as Re,ac as qe,p as Oe,U as Je}from"../chunks/vendor-cce9f310.js";import{a as Be}from"../chunks/api-5c0c9630.js";import{g as Qe}from"../chunks/navigation-51f4a605.js";import{F as We}from"../chunks/Fields-e6f6d5c0.js";import{I as Ke}from"../chunks/Input-93bd4be1.js";import{I as Xe}from"../chunks/Image-3c710c51.js";import{T as Ze}from"../chunks/Tag-6147c832.js";import{c as Le}from"../chunks/checkEmail-33bd547c.js";import{a as xe}from"../chunks/abslink-3768d0d8.js";import"../chunks/post-5b27026c.js";import"../chunks/singletons-12a22614.js";function ye(u){let e,n;return{c(){e=y("script"),this.h()},l(t){const r=Ue('[data-svelte="svelte-1eu2i5p"]',document.head);e=ee(r,"SCRIPT",{src:!0});var a=fe(e);a.forEach(d),r.forEach(d),this.h()},h(){Ve(e.src,n="https://js.paystack.co/v1/inline.js")||Ce(e,"src",n)},m(t,r){ae(document.head,e)},p:be,i:be,o:be,d(t){d(e)}}}function et(u,e,n){let{config:t={}}=e,r=!1;Ye(()=>{n(1,r=!0)});function a(){PaystackPop.setup(t).openIframe()}return u.$$set=f=>{"config"in f&&n(0,t=f.config)},u.$$.update=()=>{u.$$.dirty&3&&r&&t.open&&a()},[t,r]}class tt extends Ie{constructor(e){super();je(this,e,et,ye,Ae,{config:0})}}function nt(u){let e,n;return e=new pe({props:{size:"small",$$slots:{default:[rt]},$$scope:{ctx:u}}}),e.$on("click",u[22]),{c(){h(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const a={};r[1]&1024&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function st(u){let e,n,t,r;return e=new pe({props:{size:"small",$$slots:{default:[ut]},$$scope:{ctx:u}}}),e.$on("click",u[20]),t=new pe({props:{size:"small",$$slots:{default:[lt]},$$scope:{ctx:u}}}),t.$on("click",u[21]),{c(){h(e.$$.fragment),n=F(),h(t.$$.fragment)},l(a){v(e.$$.fragment,a),n=G(a),v(t.$$.fragment,a)},m(a,f){w(e,a,f),E(a,n,f),w(t,a,f),r=!0},p(a,f){const g={};f[1]&1024&&(g.$$scope={dirty:f,ctx:a}),e.$set(g);const i={};f[1]&1024&&(i.$$scope={dirty:f,ctx:a}),t.$set(i)},i(a){r||($(e.$$.fragment,a),$(t.$$.fragment,a),r=!0)},o(a){m(e.$$.fragment,a),m(t.$$.fragment,a),r=!1},d(a){T(e,a),a&&d(n),T(t,a)}}}function rt(u){let e;return{c(){e=ce("Subscribe")},l(n){e=_e(n,"Subscribe")},m(n,t){E(n,e,t)},d(n){n&&d(e)}}}function ut(u){let e;return{c(){e=ce("Renew subscription")},l(n){e=_e(n,"Renew subscription")},m(n,t){E(n,e,t)},d(n){n&&d(e)}}}function lt(u){let e;return{c(){e=ce("Change card")},l(n){e=_e(n,"Change card")},m(n,t){E(n,e,t)},d(n){n&&d(e)}}}function ft(u){let e,n,t,r;const a=[st,nt],f=[];function g(i,c){return i[0].paid?0:1}return e=g(u),n=f[e]=a[e](u),{c(){n.c(),t=Se()},l(i){n.l(i),t=Se()},m(i,c){f[e].m(i,c),E(i,t,c),r=!0},p(i,c){let I=e;e=g(i),e===I?f[e].p(i,c):(ze(),m(f[I],1,1,()=>{f[I]=null}),Fe(),n=f[e],n?n.p(i,c):(n=f[e]=a[e](i),n.c()),$(n,1),n.m(t.parentNode,t))},i(i){r||($(n),r=!0)},o(i){m(n),r=!1},d(i){f[e].d(i),i&&d(t)}}}function at(u){let e,n,t;function r(f){u[24](f)}let a={labelText:"Hide profile from public"};return u[4]!==void 0&&(a.checked=u[4]),e=new Ge({props:a}),B.push(()=>K(e,"checked",r)),{c(){h(e.$$.fragment)},l(f){v(e.$$.fragment,f)},m(f,g){w(e,f,g),t=!0},p(f,g){const i={};!n&&g[0]&16&&(n=!0,i.checked=f[4],L(()=>n=!1)),e.$set(i)},i(f){t||($(e.$$.fragment,f),t=!0)},o(f){m(e.$$.fragment,f),t=!1},d(f){T(e,f)}}}function it(u){let e,n;return e=new oe({props:{$$slots:{default:[at]},$$scope:{ctx:u}}}),{c(){h(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const a={};r[0]&16|r[1]&1024&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function ot(u){let e,n,t;function r(f){u[26](f)}let a={pin:!0};return u[12]!==void 0&&(a.fields=u[12]),e=new We({props:a}),B.push(()=>K(e,"fields",r)),{c(){h(e.$$.fragment)},l(f){v(e.$$.fragment,f)},m(f,g){w(e,f,g),t=!0},p(f,g){const i={};!n&&g[0]&4096&&(n=!0,i.fields=f[12],L(()=>n=!1)),e.$set(i)},i(f){t||($(e.$$.fragment,f),t=!0)},o(f){m(e.$$.fragment,f),t=!1},d(f){T(e,f)}}}function pt(u){let e,n;return e=new oe({props:{$$slots:{default:[ot]},$$scope:{ctx:u}}}),{c(){h(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const a={};r[0]&4096|r[1]&1024&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function $t(u){let e,n,t,r,a,f,g,i,c,I,_,b,C,U,P,R,z,A,S,N,j,H,D,q,O,M;function l(s){u[27](s)}function o(s){u[28](s)}function W(s){u[29](s)}let V={labelText:"Username"};u[15]!==void 0&&(V.invalidText=u[15]),u[14]!==void 0&&(V.invalid=u[14]),u[3]!==void 0&&(V.value=u[3]),e=new Ke({props:V}),B.push(()=>K(e,"invalidText",l)),B.push(()=>K(e,"invalid",o)),B.push(()=>K(e,"value",W));function X(s){u[30](s)}let J={labelText:"Show email in profile"};u[2]!==void 0&&(J.checked=u[2]),f=new Ge({props:J}),B.push(()=>K(f,"checked",X));function Z(s){u[31](s)}let Q={labelText:"Email"};u[8]!==void 0&&(Q.value=u[8]),c=new $e({props:Q}),B.push(()=>K(c,"value",Z));function x(s){u[32](s)}let te={labelText:"Name"};u[11]!==void 0&&(te.value=u[11]),b=new $e({props:te}),B.push(()=>K(b,"value",x));function me(s){u[33](s)}let ne={labelText:"Phone"};u[9]!==void 0&&(ne.value=u[9]),P=new $e({props:ne}),B.push(()=>K(P,"value",me));function ge(s){u[34](s)}let se={labelText:"Address"};u[5]!==void 0&&(se.value=u[5]),A=new $e({props:se}),B.push(()=>K(A,"value",ge));function p(s){u[35](s)}let re={invalid:u[16],invalidText:kt,labelText:"Link"};u[6]!==void 0&&(re.value=u[6]),j=new Ke({props:re}),B.push(()=>K(j,"value",p));function ue(s){u[36](s)}let Y={rows:11,placeholder:"About (Markdown)"};return u[10]!==void 0&&(Y.value=u[10]),q=new Me({props:Y}),B.push(()=>K(q,"value",ue)),{c(){h(e.$$.fragment),a=F(),h(f.$$.fragment),i=F(),h(c.$$.fragment),_=F(),h(b.$$.fragment),U=F(),h(P.$$.fragment),z=F(),h(A.$$.fragment),N=F(),h(j.$$.fragment),D=F(),h(q.$$.fragment)},l(s){v(e.$$.fragment,s),a=G(s),v(f.$$.fragment,s),i=G(s),v(c.$$.fragment,s),_=G(s),v(b.$$.fragment,s),U=G(s),v(P.$$.fragment,s),z=G(s),v(A.$$.fragment,s),N=G(s),v(j.$$.fragment,s),D=G(s),v(q.$$.fragment,s)},m(s,k){w(e,s,k),E(s,a,k),w(f,s,k),E(s,i,k),w(c,s,k),E(s,_,k),w(b,s,k),E(s,U,k),w(P,s,k),E(s,z,k),w(A,s,k),E(s,N,k),w(j,s,k),E(s,D,k),w(q,s,k),M=!0},p(s,k){const le={};!n&&k[0]&32768&&(n=!0,le.invalidText=s[15],L(()=>n=!1)),!t&&k[0]&16384&&(t=!0,le.invalid=s[14],L(()=>t=!1)),!r&&k[0]&8&&(r=!0,le.value=s[3],L(()=>r=!1)),e.$set(le);const ke={};!g&&k[0]&4&&(g=!0,ke.checked=s[2],L(()=>g=!1)),f.$set(ke);const he={};!I&&k[0]&256&&(I=!0,he.value=s[8],L(()=>I=!1)),c.$set(he);const ve={};!C&&k[0]&2048&&(C=!0,ve.value=s[11],L(()=>C=!1)),b.$set(ve);const we={};!R&&k[0]&512&&(R=!0,we.value=s[9],L(()=>R=!1)),P.$set(we);const Te={};!S&&k[0]&32&&(S=!0,Te.value=s[5],L(()=>S=!1)),A.$set(Te);const de={};k[0]&65536&&(de.invalid=s[16]),!H&&k[0]&64&&(H=!0,de.value=s[6],L(()=>H=!1)),j.$set(de);const Ee={};!O&&k[0]&1024&&(O=!0,Ee.value=s[10],L(()=>O=!1)),q.$set(Ee)},i(s){M||($(e.$$.fragment,s),$(f.$$.fragment,s),$(c.$$.fragment,s),$(b.$$.fragment,s),$(P.$$.fragment,s),$(A.$$.fragment,s),$(j.$$.fragment,s),$(q.$$.fragment,s),M=!0)},o(s){m(e.$$.fragment,s),m(f.$$.fragment,s),m(c.$$.fragment,s),m(b.$$.fragment,s),m(P.$$.fragment,s),m(A.$$.fragment,s),m(j.$$.fragment,s),m(q.$$.fragment,s),M=!1},d(s){T(e,s),s&&d(a),T(f,s),s&&d(i),T(c,s),s&&d(_),T(b,s),s&&d(U),T(P,s),s&&d(z),T(A,s),s&&d(N),T(j,s),s&&d(D),T(q,s)}}}function ct(u){let e,n;return e=new De({props:{$$slots:{default:[$t]},$$scope:{ctx:u}}}),{c(){h(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const a={};r[0]&118636|r[1]&1024&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function _t(u){let e,n;return e=new oe({props:{$$slots:{default:[ct]},$$scope:{ctx:u}}}),{c(){h(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const a={};r[0]&118636|r[1]&1024&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function Ne(u){let e,n,t;return n=new Je({}),{c(){e=y("div"),h(n.$$.fragment),this.h()},l(r){e=ee(r,"DIV",{class:!0});var a=fe(e);v(n.$$.fragment,a),a.forEach(d),this.h()},h(){Ce(e,"class","right svelte-pb9zr2")},m(r,a){E(r,e,a),w(n,e,null),t=!0},i(r){t||($(n.$$.fragment,r),t=!0)},o(r){m(n.$$.fragment,r),t=!1},d(r){r&&d(e),T(n)}}}function mt(u){let e,n,t,r,a,f,g,i=u[17]&&Ne(),c=[u[40]],I={};for(let _=0;_<c.length;_+=1)I=He(I,c[_]);return{c(){e=y("div"),n=y("p"),t=ce("Edit"),r=F(),i&&i.c(),this.h()},l(_){e=ee(_,"DIV",{});var b=fe(e);n=ee(b,"P",{});var C=fe(n);t=_e(C,"Edit"),C.forEach(d),r=G(b),i&&i.l(b),b.forEach(d),this.h()},h(){Re(e,I),qe(e,"svelte-pb9zr2",!0)},m(_,b){E(_,e,b),ae(e,n),ae(n,t),ae(e,r),i&&i.m(e,null),a=!0,f||(g=Pe(e,"click",u[19]),f=!0)},p(_,b){_[17]?i?b[0]&131072&&$(i,1):(i=Ne(),i.c(),$(i,1),i.m(e,null)):i&&(ze(),m(i,1,1,()=>{i=null}),Fe()),Re(e,I=Oe(c,[b[1]&512&&_[40]])),qe(e,"svelte-pb9zr2",!0)},i(_){a||($(i),a=!0)},o(_){m(i),a=!1},d(_){_&&d(e),i&&i.d(),f=!1,g()}}}function gt(u){let e,n;return e=new pe({props:{as:!0,$$slots:{default:[mt,({props:t})=>({40:t}),({props:t})=>[0,t?512:0]]},$$scope:{ctx:u}}}),{c(){h(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const a={};r[0]&131072|r[1]&1536&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function dt(u){let e,n;return e=new oe({props:{$$slots:{default:[gt]},$$scope:{ctx:u}}}),{c(){h(e.$$.fragment)},l(t){v(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const a={};r[0]&131072|r[1]&1024&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){m(e.$$.fragment,t),n=!1},d(t){T(e,t)}}}function bt(u){let e,n,t,r,a,f,g,i,c,I,_,b,C,U,P,R,z,A,S,N,j,H;e=new tt({props:{config:u[1]}});function D(l){u[23](l)}let q={$$slots:{default:[ft]},$$scope:{ctx:u}};u[7]!==void 0&&(q.image=u[7]),t=new Xe({props:q}),B.push(()=>K(t,"image",D)),f=new ie({props:{noGutter:!0,$$slots:{default:[it]},$$scope:{ctx:u}}});function O(l){u[25](l)}let M={};return u[13]!==void 0&&(M.tags=u[13]),i=new Ze({props:M}),B.push(()=>K(i,"tags",O)),C=new ie({props:{noGutter:!0,$$slots:{default:[pt]},$$scope:{ctx:u}}}),z=new ie({props:{noGutter:!0,$$slots:{default:[_t]},$$scope:{ctx:u}}}),S=new ie({props:{noGutter:!0,$$slots:{default:[dt]},$$scope:{ctx:u}}}),{c(){h(e.$$.fragment),n=F(),h(t.$$.fragment),a=F(),h(f.$$.fragment),g=F(),h(i.$$.fragment),I=F(),_=y("br"),b=F(),h(C.$$.fragment),U=F(),P=y("br"),R=F(),h(z.$$.fragment),A=F(),h(S.$$.fragment)},l(l){v(e.$$.fragment,l),n=G(l),v(t.$$.fragment,l),a=G(l),v(f.$$.fragment,l),g=G(l),v(i.$$.fragment,l),I=G(l),_=ee(l,"BR",{}),b=G(l),v(C.$$.fragment,l),U=G(l),P=ee(l,"BR",{}),R=G(l),v(z.$$.fragment,l),A=G(l),v(S.$$.fragment,l)},m(l,o){w(e,l,o),E(l,n,o),w(t,l,o),E(l,a,o),w(f,l,o),E(l,g,o),w(i,l,o),E(l,I,o),E(l,_,o),E(l,b,o),w(C,l,o),E(l,U,o),E(l,P,o),E(l,R,o),w(z,l,o),E(l,A,o),w(S,l,o),N=!0,j||(H=Pe(window,"keydown",u[18]),j=!0)},p(l,o){const W={};o[0]&2&&(W.config=l[1]),e.$set(W);const V={};o[0]&3|o[1]&1024&&(V.$$scope={dirty:o,ctx:l}),!r&&o[0]&128&&(r=!0,V.image=l[7],L(()=>r=!1)),t.$set(V);const X={};o[0]&16|o[1]&1024&&(X.$$scope={dirty:o,ctx:l}),f.$set(X);const J={};!c&&o[0]&8192&&(c=!0,J.tags=l[13],L(()=>c=!1)),i.$set(J);const Z={};o[0]&4096|o[1]&1024&&(Z.$$scope={dirty:o,ctx:l}),C.$set(Z);const Q={};o[0]&118636|o[1]&1024&&(Q.$$scope={dirty:o,ctx:l}),z.$set(Q);const x={};o[0]&131072|o[1]&1024&&(x.$$scope={dirty:o,ctx:l}),S.$set(x)},i(l){N||($(e.$$.fragment,l),$(t.$$.fragment,l),$(f.$$.fragment,l),$(i.$$.fragment,l),$(C.$$.fragment,l),$(z.$$.fragment,l),$(S.$$.fragment,l),N=!0)},o(l){m(e.$$.fragment,l),m(t.$$.fragment,l),m(f.$$.fragment,l),m(i.$$.fragment,l),m(C.$$.fragment,l),m(z.$$.fragment,l),m(S.$$.fragment,l),N=!1},d(l){T(e,l),l&&d(n),T(t,l),l&&d(a),T(f,l),l&&d(g),T(i,l),l&&d(I),l&&d(_),l&&d(b),T(C,l),l&&d(U),l&&d(P),l&&d(R),T(z,l),l&&d(A),T(S,l),j=!1,H()}}}async function Ft({session:u}){let e=u.user;return e?{props:{user:e}}:{status:302,redirect:"/login"}}let kt='Add a url scheme to the link, something like "http://, at the beginning';function ht(u,e,n){console.log(typeof{}.PAYSTACK_TEST);let{user:t={}}=e,r={key:{}.PAYSTACK_LIVE_KEY,email:t.email,metadata:{id:t.id},amount:190233,currency:"NGN",embed:!1,value:"Pay"},a=t.show_email,f=t.username,g=t.hidden,i=t.address,c=t.website,I=t.image,_=t.email,b=t.phone,C=t.about,U=t.data,P=t.name,R=t.fields||[];console.log("after user.fields",R);let z=t.tags||[],A,S,N,j;const H=p=>{switch(p.keyCode){case 13:p.ctrlKey&&D()}},D=async()=>{let p=R.map(Y=>({label:Y.label,value:Y.value}));if(n(17,j=!0),c&&!xe.test(c)){console.log("website err"),n(16,N=!0),editLoading=!1;return}if(!_){console.log("not email err"),n(17,j=!1);return}if(!Le(_)){console.log("check email err"),n(17,j=!1);return}if(!f){console.log("username err"),n(14,A=!0),n(15,S="Empty"),n(17,j=!1);return}if(f!==t.username&&await Be.get(`check_username/${f}`).then(Y=>!Y.res)){console.log("api check_username err"),n(14,A=!0),n(15,S="Username taken"),n(17,j=!1);return}if(Le(f)){console.log("check email username err"),n(14,A=!0),n(15,S="Unaccepted"),n(17,j=!1);return}let re={show_email:a,username:f,hidden:g,website:c,address:i,email:_,phone:b,about:C,fields:p,image:I,data:U,tags:z,name:P},ue=await Be.put("users",re).finally(Y=>(console.log("edit res: ",Y),n(17,j=!1),Y));ue.id&&Qe(`/${ue.username}`)},q=()=>{n(1,r.open=!0,r)},O=()=>{n(1,r.open=!0,r),n(1,r.amount=3e3,r),n(1,r.metadata.purpose="change_card",r)},M=()=>{n(1,r.open=!0,r)};function l(p){I=p,n(7,I)}function o(p){g=p,n(4,g)}function W(p){z=p,n(13,z)}function V(p){R=p,n(12,R)}function X(p){S=p,n(15,S)}function J(p){A=p,n(14,A)}function Z(p){f=p,n(3,f)}function Q(p){a=p,n(2,a)}function x(p){_=p,n(8,_)}function te(p){P=p,n(11,P)}function me(p){b=p,n(9,b)}function ne(p){i=p,n(5,i)}function ge(p){c=p,n(6,c)}function se(p){C=p,n(10,C)}return u.$$set=p=>{"user"in p&&n(0,t=p.user)},[t,r,a,f,g,i,c,I,_,b,C,P,R,z,A,S,N,j,H,D,q,O,M,l,o,W,V,X,J,Z,Q,x,te,me,ne,ge,se]}class Gt extends Ie{constructor(e){super();je(this,e,ht,bt,Ae,{user:0},null,[-1,-1])}}export{Gt as default,Ft as load};
