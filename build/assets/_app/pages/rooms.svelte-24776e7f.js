import{S as U,i as V,s as W,E as X,F as Y,e as q,k as T,j as k,c as A,n as S,m as v,f as d,o as w,x as _,u as h,d as $,v as y,l as N,a5 as Z,G as x,w as R,a6 as ee,I as te,a1 as B,a2 as C,r as O,t as P,a as F,g as I,a4 as J,b as z,ac as D,O as se,a8 as ne,h as ae}from"../chunks/vendor-cce9f310.js";import{a as H}from"../chunks/api-5c0c9630.js";import{T as re}from"../chunks/Tag-6147c832.js";import{g as oe}from"../chunks/navigation-51f4a605.js";import{r as K}from"../chunks/stores-befe408a.js";import"../chunks/post-5b27026c.js";import"../chunks/singletons-12a22614.js";function L(r,t,s){const e=r.slice();return e[7]=t[s],e}function le(r){let t,s=r[7].name+"",e,o,a;return{c(){t=q("p"),e=P(s),this.h()},l(f){t=A(f,"P",{class:!0,href:!0});var c=F(t);e=I(c,s),c.forEach($),this.h()},h(){z(t,"class","item svelte-dveft3"),z(t,"href",""),D(t,"unseen",r[7].unseen)},m(f,c){d(f,t,c),J(t,e),o||(a=se(t,"click",function(){ne(r[4](r[7]))&&r[4](r[7]).apply(this,arguments)}),o=!0)},p(f,c){r=f,c&1&&s!==(s=r[7].name+"")&&ae(e,s),c&1&&D(t,"unseen",r[7].unseen)},d(f){f&&$(t),o=!1,a()}}}function fe(r){let t,s;return t=new C({props:{$$slots:{default:[le]},$$scope:{ctx:r}}}),{c(){k(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,o){w(t,e,o),s=!0},p(e,o){const a={};o&1025&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){y(t,e)}}}function M(r){let t,s,e,o;return e=new B({props:{noGutter:!0,$$slots:{default:[fe]},$$scope:{ctx:r}}}),{c(){t=q("br"),s=T(),k(e.$$.fragment)},l(a){t=A(a,"BR",{}),s=S(a),v(e.$$.fragment,a)},m(a,f){d(a,t,f),d(a,s,f),w(e,a,f),o=!0},p(a,f){const c={};f&1025&&(c.$$scope={dirty:f,ctx:a}),e.$set(c)},i(a){o||(_(e.$$.fragment,a),o=!0)},o(a){h(e.$$.fragment,a),o=!1},d(a){a&&$(t),a&&$(s),y(e,a)}}}function Q(r){let t,s;return t=new B({props:{noGutter:!0,$$slots:{default:[ue]},$$scope:{ctx:r}}}),{c(){k(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,o){w(t,e,o),s=!0},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){y(t,e)}}}function ie(r){let t,s;return{c(){t=q("p"),s=P("There don't seem to be any results")},l(e){t=A(e,"P",{});var o=F(t);s=I(o,"There don't seem to be any results"),o.forEach($)},m(e,o){d(e,t,o),J(t,s)},d(e){e&&$(t)}}}function ue(r){let t,s;return t=new C({props:{$$slots:{default:[ie]},$$scope:{ctx:r}}}),{c(){k(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,o){w(t,e,o),s=!0},p(e,o){const a={};o&1024&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){y(t,e)}}}function ce(r){let t,s,e,o,a,f,c;function E(n){r[6](n)}let j={};r[3]!==void 0&&(j.tags=r[3]),s=new re({props:j}),X.push(()=>Y(s,"tags",E)),s.$on("change",r[5]);let m=r[0],l=[];for(let n=0;n<m.length;n+=1)l[n]=M(L(r,m,n));const b=n=>h(l[n],1,1,()=>{l[n]=null});let u=r[2]&&r[1]<1&&Q(r);return{c(){t=T(),k(s.$$.fragment),o=T();for(let n=0;n<l.length;n+=1)l[n].c();a=T(),u&&u.c(),f=N(),this.h()},l(n){Z('[data-svelte="svelte-fq7das"]',document.head).forEach($),t=S(n),v(s.$$.fragment,n),o=S(n);for(let g=0;g<l.length;g+=1)l[g].l(n);a=S(n),u&&u.l(n),f=N(),this.h()},h(){document.title="Apexlinks"},m(n,i){d(n,t,i),w(s,n,i),d(n,o,i);for(let g=0;g<l.length;g+=1)l[g].m(n,i);d(n,a,i),u&&u.m(n,i),d(n,f,i),c=!0},p(n,[i]){const g={};if(!e&&i&8&&(e=!0,g.tags=n[3],x(()=>e=!1)),s.$set(g),i&17){m=n[0];let p;for(p=0;p<m.length;p+=1){const G=L(n,m,p);l[p]?(l[p].p(G,i),_(l[p],1)):(l[p]=M(G),l[p].c(),_(l[p],1),l[p].m(a.parentNode,a))}for(O(),p=m.length;p<l.length;p+=1)b(p);R()}n[2]&&n[1]<1?u?i&6&&_(u,1):(u=Q(n),u.c(),_(u,1),u.m(f.parentNode,f)):u&&(O(),h(u,1,1,()=>{u=null}),R())},i(n){if(!c){_(s.$$.fragment,n);for(let i=0;i<m.length;i+=1)_(l[i]);_(u),c=!0}},o(n){h(s.$$.fragment,n),l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)h(l[i]);h(u),c=!1},d(n){n&&$(t),y(s,n),n&&$(o),ee(l,n),n&&$(a),u&&u.d(n),n&&$(f)}}}async function ve({session:r}){let t=r.user;return t?{props:{user:t}}:{status:302,redirect:"/login"}}let me=0;function pe(r,t,s){let e;te(r,K,m=>s(3,e=m));let o=[],a=0,f,c=async m=>{await H.put("join",{id:m.id}),oe(`/room/${m.id}`)},E=async function(){let l=`rooms?tags=${JSON.stringify(e)}&page=${me+1}`,b=await H.get(l);Array.isArray(b.items)&&s(0,o=b.items),s(1,a=b.total),s(2,f=!0)};function j(m){e=m,K.set(e)}return[o,a,f,e,c,E,j]}class we extends U{constructor(t){super();V(this,t,pe,ce,W,{})}}export{we as default,ve as load};
