import{S as t,i as e,s as n,j as s,m as a,o as r,G as $,v as o,r as c,w as i,a3 as f,k as m,a9 as u,d as l,n as p,f as d,u as g,I as v,E as h,F as x,a4 as w,B as k,aw as y,ax as E,K as j,l as T,an as b,A,e as I,t as N,c as G,a as U,g as B,aj as D,a6 as F,O as K,p as O,U as P}from"../chunks/vendor-221a53e8.js";import{I as R}from"../chunks/Input-cd25684c.js";import{T as S}from"../chunks/Tag-9a4ea10c.js";import{c as V,o as q}from"../chunks/stores-132b7e55.js";import{g as z}from"../chunks/navigation-20968cc5.js";import{g as C,a as H}from"../chunks/api-464cac91.js";import"../chunks/singletons-bb9012b7.js";function J(t){let e,n,f;function m(e){t[11](e)}let u={};return void 0!==t[7]&&(u.tags=t[7]),e=new S({props:u}),h.push((()=>x(e,"tags",m))),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,n){r(e,t,n),f=!0},p(t,s){const a={};!n&&128&s&&(n=!0,a.tags=t[7],$((()=>n=!1))),e.$set(a)},i(t){f||(o(e.$$.fragment,t),f=!0)},o(t){c(e.$$.fragment,t),f=!1},d(t){i(e,t)}}}function L(t){let e,n,f,m;function u(e){t[14](e)}function l(e){t[15](e)}let p={invalidText:t[4],labelText:"User"};return void 0!==t[2]&&(p.invalid=t[2]),void 0!==t[0]&&(p.value=t[0]),e=new R({props:p}),h.push((()=>x(e,"invalid",u))),h.push((()=>x(e,"value",l))),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,n){r(e,t,n),m=!0},p(t,s){const a={};16&s&&(a.invalidText=t[4]),!n&&4&s&&(n=!0,a.invalid=t[2],$((()=>n=!1))),!f&&1&s&&(f=!0,a.value=t[0],$((()=>f=!1))),e.$set(a)},i(t){m||(o(e.$$.fragment,t),m=!0)},o(t){c(e.$$.fragment,t),m=!1},d(t){i(e,t)}}}function M(t){let e,n,f,u,v,w;function y(e){t[12](e)}function E(e){t[13](e)}let j={invalidText:t[3],labelText:"Name"};void 0!==t[1]&&(j.invalid=t[1]),void 0!==t[6]&&(j.value=t[6]),e=new R({props:j}),h.push((()=>x(e,"invalid",y))),h.push((()=>x(e,"value",E)));let b=!t[8]&&L(t);return{c(){s(e.$$.fragment),u=m(),b&&b.c(),v=T()},l(t){a(e.$$.fragment,t),u=p(t),b&&b.l(t),v=T()},m(t,n){r(e,t,n),d(t,u,n),b&&b.m(t,n),d(t,v,n),w=!0},p(t,s){const a={};8&s&&(a.invalidText=t[3]),!n&&2&s&&(n=!0,a.invalid=t[1],$((()=>n=!1))),!f&&64&s&&(f=!0,a.value=t[6],$((()=>f=!1))),e.$set(a),t[8]?b&&(k(),c(b,1,1,(()=>{b=null})),g()):b?(b.p(t,s),256&s&&o(b,1)):(b=L(t),b.c(),o(b,1),b.m(v.parentNode,v))},i(t){w||(o(e.$$.fragment,t),o(b),w=!0)},o(t){c(e.$$.fragment,t),c(b),w=!1},d(t){i(e,t),t&&l(u),b&&b.d(t),t&&l(v)}}}function Q(t){let e,n;return e=new y({props:{$$slots:{default:[M]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524639&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function W(t){let e,n;return e=new w({props:{$$slots:{default:[Q]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524639&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function X(t){let e,n;return e=new P({}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function Y(t){let e,n,s,a,r,$,i,f=t[5]&&X(),u=[t[18]],v={};for(let o=0;o<u.length;o+=1)v=A(v,u[o]);return{c(){e=I("div"),n=I("p"),s=N("Add"),a=m(),f&&f.c(),this.h()},l(t){e=G(t,"DIV",{});var r=U(e);n=G(r,"P",{});var $=U(n);s=B($,"Add"),$.forEach(l),a=p(r),f&&f.l(r),r.forEach(l),this.h()},h(){D(e,v)},m(o,c){d(o,e,c),F(e,n),F(n,s),F(e,a),f&&f.m(e,null),r=!0,$||(i=K(e,"click",t[9]),$=!0)},p(t,n){t[5]?f?32&n&&o(f,1):(f=X(),f.c(),o(f,1),f.m(e,null)):f&&(k(),c(f,1,1,(()=>{f=null})),g()),D(e,v=O(u,[262144&n&&t[18]]))},i(t){r||(o(f),r=!0)},o(t){c(f),r=!1},d(t){t&&l(e),f&&f.d(),$=!1,i()}}}function Z(t){let e,n;return e=new b({props:{as:!0,$$slots:{default:[Y,({props:t})=>({18:t}),({props:t})=>t?262144:0]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};786464&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function _(t){let e,n;return e=new E({props:{stacked:!0,$$slots:{default:[Z]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524320&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function tt(t){let e,n;return e=new w({props:{$$slots:{default:[_]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524320&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function et(t){let e,n,$,v,h,x,w=t[8]&&J(t);return $=new f({props:{noGutter:!0,$$slots:{default:[W]},$$scope:{ctx:t}}}),h=new f({props:{noGutter:!0,$$slots:{default:[tt]},$$scope:{ctx:t}}}),{c(){e=m(),w&&w.c(),n=m(),s($.$$.fragment),v=m(),s(h.$$.fragment),this.h()},l(t){u('[data-svelte="svelte-1mx7c7r"]',document.head).forEach(l),e=p(t),w&&w.l(t),n=p(t),a($.$$.fragment,t),v=p(t),a(h.$$.fragment,t),this.h()},h(){document.title="Add Room"},m(t,s){d(t,e,s),w&&w.m(t,s),d(t,n,s),r($,t,s),d(t,v,s),r(h,t,s),x=!0},p(t,[e]){t[8]?w?(w.p(t,e),256&e&&o(w,1)):(w=J(t),w.c(),o(w,1),w.m(n.parentNode,n)):w&&(k(),c(w,1,1,(()=>{w=null})),g());const s={};524639&e&&(s.$$scope={dirty:e,ctx:t}),$.$set(s);const a={};524320&e&&(a.$$scope={dirty:e,ctx:t}),h.$set(a)},i(t){x||(o(w),o($.$$.fragment,t),o(h.$$.fragment,t),x=!0)},o(t){c(w),c($.$$.fragment,t),c(h.$$.fragment,t),x=!1},d(t){t&&l(e),w&&w.d(t),t&&l(n),i($,t),t&&l(v),i(h,t)}}}async function nt({session:t}){return t.token?{props:{user:user}}:{status:302,redirect:"/login"}}function st(t,e,n){let s,a,r;v(t,username,(t=>n(0,s=t))),v(t,V,(t=>n(16,a=t))),v(t,q,(t=>n(8,r=t)));let $,o,c,i,f,m,u,{token:l=""}=e;const p=async()=>{if(""==s)return;(await C(`users/${s}`)||{}).id?n(2,o=!1):(n(2,o=!0),n(4,i="Not found"))};return t.$$set=t=>{"token"in t&&n(10,l=t.token)},t.$$.update=()=>{1&t.$$.dirty&&process.browser&&s&&setTimeout(p,123)},[s,$,o,c,i,f,m,u,r,async function(){if(n(5,f=!0),!m)return n(1,$=!0),n(3,c="Empty"),void n(5,f=!1);if(!s)return n(2,o=!0),n(4,i="Empty"),void n(5,f=!1);let t={username:s,name:m,tags:u},e=await H("rooms",t,l);e.nameError?(n(3,c=e.nameError),n(1,$=!0),n(5,f=!1)):e.userError?(n(4,i=e.userError),n(2,o=!0),n(5,f=!1)):e.id&&(j(V,a=m,a),n(5,f=!1),z(`/room/${e.id}`))},l,function(t){u=t,n(7,u)},function(t){$=t,n(1,$)},function(t){m=t,n(6,m)},function(t){o=t,n(2,o)},function(t){s=t,username.set(s)}]}export default class extends t{constructor(t){super(),e(this,t,st,et,n,{token:10})}}export{nt as load};
