import{S as M,i as Q,s as W,B as J,aF as Re,j as b,m as w,o as k,p as x,q as _e,x as g,u as $,v as E,H as ee,J as ge,ab as le,e as B,c as F,a as G,d as h,b as X,f as I,I as fe,a1 as Ve,k as T,n as N,a5 as Ce,O as ue,K as $e,a2 as oe,t as te,g as ne,a4 as K,aG as Je,G as L,E as D,F as S,al as Be,r as Y,w as Z,am as ae,af as se,ac as re,h as Fe,U as de}from"../chunks/vendor-cce9f310.js";import{p as he}from"../chunks/post-5b27026c.js";import{I as ce}from"../chunks/Input-93bd4be1.js";import{g as me}from"../chunks/navigation-51f4a605.js";import{s as ve}from"../chunks/stores-83bcb05a.js";import{n as pe}from"../chunks/stores-befe408a.js";import{c as be}from"../chunks/checkEmail-33bd547c.js";import"../chunks/singletons-12a22614.js";function Ge(l){let e,t;const n=[{lowContrast:!0},l[0]];let i={};for(let s=0;s<n.length;s+=1)i=J(i,n[s]);return e=new Re({props:i}),{c(){b(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,u){k(e,s,u),t=!0},p(s,[u]){const f=u&1?x(n,[n[0],_e(s[0])]):{};e.$set(f)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){E(e,s)}}}function Ae(l,e,t){const n=[];let i=ee(e,n);return l.$$set=s=>{e=J(J({},e),ge(s)),t(0,i=ee(e,n))},[i]}class He extends M{constructor(e){super();Q(this,e,Ae,Ge,W,{})}}function ze(l){let e,t;const n=[{caption:new Date().toLocaleString()},l[0]];let i={};for(let s=0;s<n.length;s+=1)i=J(i,n[s]);return e=new He({props:i}),{c(){b(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,u){k(e,s,u),t=!0},p(s,[u]){const f=u&1?x(n,[u&0&&{caption:new Date().toLocaleString()},u&1&&_e(s[0])]):{};e.$set(f)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){E(e,s)}}}function Ke(l,e,t){const n=[];let i=ee(e,n);return l.$$set=s=>{e=J(J({},e),ge(s)),t(0,i=ee(e,n))},[i]}class we extends M{constructor(e){super();Q(this,e,Ke,ze,W,{})}}function Oe(l){let e,t;return e=new we({props:{kind:"success",title:"Password reset successful"}}),{c(){b(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,i){k(e,n,i),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}class Me extends M{constructor(e){super();Q(this,e,null,Oe,W,{})}}function Qe(l){let e,t;return e=new we({props:{title:"Invalid password reset link"}}),{c(){b(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,i){k(e,n,i),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}class We extends M{constructor(e){super();Q(this,e,null,Qe,W,{})}}function Xe(l){let e,t;return e=new Me({}),{c(){b(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,i){k(e,n,i),t=!0},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function Ye(l){let e,t;return e=new We({}),{c(){b(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,i){k(e,n,i),t=!0},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function Ze(l){let e,t,n,i;const s=[Ye,Xe],u=[];function f(r,a){return r[0]=="invalid"?0:r[0]=="resetSuccess"?1:-1}return~(t=f(l))&&(n=u[t]=s[t](l)),{c(){e=B("div"),n&&n.c(),this.h()},l(r){e=F(r,"DIV",{class:!0});var a=G(e);n&&n.l(a),a.forEach(h),this.h()},h(){X(e,"class","fixed svelte-im6ayo")},m(r,a){I(r,e,a),~t&&u[t].m(e,null),i=!0},p:le,i(r){i||(g(n),i=!0)},o(r){$(n),i=!1},d(r){r&&h(e),~t&&u[t].d()}}}function ye(l,e,t){let n;return fe(l,pe,s=>t(1,n=s)),[n]}class xe extends M{constructor(e){super();Q(this,e,ye,Ze,W,{})}}function et(l){let e,t;return{c(){e=B("h1"),t=te("Apexlinks"),this.h()},l(n){e=F(n,"H1",{id:!0,class:!0});var i=G(e);t=ne(i,"Apexlinks"),i.forEach(h),this.h()},h(){X(e,"id","head"),X(e,"class","svelte-1qu8hie")},m(n,i){I(n,e,i),K(e,t)},d(n){n&&h(e)}}}function ke(l){let e,t,n,i,s;function u(c){l[21](c)}function f(c){l[22](c)}function r(c){l[23](c)}let a={invalidText:l[12],labelText:"Email",focus:!0};return l[11]!==void 0&&(a.invalid=l[11]),l[7]!==void 0&&(a.ref=l[7]),l[13]!==void 0&&(a.value=l[13]),e=new ce({props:a}),D.push(()=>S(e,"invalid",u)),D.push(()=>S(e,"ref",f)),D.push(()=>S(e,"value",r)),{c(){b(e.$$.fragment)},l(c){w(e.$$.fragment,c)},m(c,m){k(e,c,m),s=!0},p(c,m){const _={};m[0]&4096&&(_.invalidText=c[12]),!t&&m[0]&2048&&(t=!0,_.invalid=c[11],L(()=>t=!1)),!n&&m[0]&128&&(n=!0,_.ref=c[7],L(()=>n=!1)),!i&&m[0]&8192&&(i=!0,_.value=c[13],L(()=>i=!1)),e.$set(_)},i(c){s||(g(e.$$.fragment,c),s=!0)},o(c){$(e.$$.fragment,c),s=!1},d(c){E(e,c)}}}function Ee(l){let e,t;return e=new ae({props:{as:!0,$$slots:{default:[tt,({props:n})=>({38:n}),({props:n})=>[0,n?128:0]]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,i){k(e,n,i),t=!0},p(n,i){const s={};i[0]&16384|i[1]&384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function Ie(l){let e,t,n;return t=new de({}),{c(){e=B("div"),b(t.$$.fragment),this.h()},l(i){e=F(i,"DIV",{class:!0});var s=G(e);w(t.$$.fragment,s),s.forEach(h),this.h()},h(){X(e,"class","right svelte-1qu8hie")},m(i,s){I(i,e,s),k(t,e,null),n=!0},i(i){n||(g(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){i&&h(e),E(t)}}}function tt(l){let e,t,n,i,s,u,f,r=l[14]&&Ie(),a=[l[38]],c={};for(let m=0;m<a.length;m+=1)c=J(c,a[m]);return{c(){e=B("div"),t=B("p"),n=te("Login"),i=T(),r&&r.c(),this.h()},l(m){e=F(m,"DIV",{});var _=G(e);t=F(_,"P",{});var j=G(t);n=ne(j,"Login"),j.forEach(h),i=N(_),r&&r.l(_),_.forEach(h),this.h()},h(){se(e,c),re(e,"svelte-1qu8hie",!0)},m(m,_){I(m,e,_),K(e,t),K(t,n),K(e,i),r&&r.m(e,null),s=!0,u||(f=ue(e,"click",l[18]),u=!0)},p(m,_){m[14]?r?_[0]&16384&&g(r,1):(r=Ie(),r.c(),g(r,1),r.m(e,null)):r&&(Y(),$(r,1,1,()=>{r=null}),Z()),se(e,c=x(a,[_[1]&128&&m[38]])),re(e,"svelte-1qu8hie",!0)},i(m){s||(g(r),s=!0)},o(m){$(r),s=!1},d(m){m&&h(e),r&&r.d(),u=!1,f()}}}function je(l){let e,t;return e=new ae({props:{as:!0,$$slots:{default:[nt,({props:n})=>({38:n}),({props:n})=>[0,n?128:0]]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,i){k(e,n,i),t=!0},p(n,i){const s={};i[0]&32768|i[1]&384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function Te(l){let e,t,n;return t=new de({}),{c(){e=B("div"),b(t.$$.fragment),this.h()},l(i){e=F(i,"DIV",{class:!0});var s=G(e);w(t.$$.fragment,s),s.forEach(h),this.h()},h(){X(e,"class","right svelte-1qu8hie")},m(i,s){I(i,e,s),k(t,e,null),n=!0},i(i){n||(g(t.$$.fragment,i),n=!0)},o(i){$(t.$$.fragment,i),n=!1},d(i){i&&h(e),E(t)}}}function nt(l){let e,t,n,i,s,u,f,r=l[15]&&Te(),a=[l[38]],c={};for(let m=0;m<a.length;m+=1)c=J(c,a[m]);return{c(){e=B("div"),t=B("p"),n=te("Join"),i=T(),r&&r.c(),this.h()},l(m){e=F(m,"DIV",{});var _=G(e);t=F(_,"P",{});var j=G(t);n=ne(j,"Join"),j.forEach(h),i=N(_),r&&r.l(_),_.forEach(h),this.h()},h(){se(e,c),re(e,"svelte-1qu8hie",!0)},m(m,_){I(m,e,_),K(e,t),K(t,n),K(e,i),r&&r.m(e,null),s=!0,u||(f=ue(e,"click",l[19]),u=!0)},p(m,_){m[15]?r?_[0]&32768&&g(r,1):(r=Te(),r.c(),g(r,1),r.m(e,null)):r&&(Y(),$(r,1,1,()=>{r=null}),Z()),se(e,c=x(a,[_[1]&128&&m[38]])),re(e,"svelte-1qu8hie",!0)},i(m){s||(g(r),s=!0)},o(m){$(r),s=!1},d(m){m&&h(e),r&&r.d(),u=!1,f()}}}function st(l){let e;return{c(){e=te(l[1])},l(t){e=ne(t,l[1])},m(t,n){I(t,e,n)},p(t,n){n[0]&2&&Fe(e,t[1])},d(t){t&&h(e)}}}function rt(l){let e,t,n,i,s=!l[0]&&Ee(l),u=l[0]&&je(l);return n=new ae({props:{kind:"ghost",size:"small",$$slots:{default:[st]},$$scope:{ctx:l}}}),n.$on("click",l[17]),{c(){s&&s.c(),e=T(),u&&u.c(),t=T(),b(n.$$.fragment)},l(f){s&&s.l(f),e=N(f),u&&u.l(f),t=N(f),w(n.$$.fragment,f)},m(f,r){s&&s.m(f,r),I(f,e,r),u&&u.m(f,r),I(f,t,r),k(n,f,r),i=!0},p(f,r){f[0]?s&&(Y(),$(s,1,1,()=>{s=null}),Z()):s?(s.p(f,r),r[0]&1&&g(s,1)):(s=Ee(f),s.c(),g(s,1),s.m(e.parentNode,e)),f[0]?u?(u.p(f,r),r[0]&1&&g(u,1)):(u=je(f),u.c(),g(u,1),u.m(t.parentNode,t)):u&&(Y(),$(u,1,1,()=>{u=null}),Z());const a={};r[0]&2|r[1]&256&&(a.$$scope={dirty:r,ctx:f}),n.$set(a)},i(f){i||(g(s),g(u),g(n.$$.fragment,f),i=!0)},o(f){$(s),$(u),$(n.$$.fragment,f),i=!1},d(f){s&&s.d(f),f&&h(e),u&&u.d(f),f&&h(t),E(n,f)}}}function it(l){let e,t,n,i,s,u,f,r,a,c,m,_,j,d=l[0]&&ke(l);function q(o){l[24](o)}function A(o){l[25](o)}function P(o){l[26](o)}let U={invalidText:l[4],labelText:"Username"};l[2]!==void 0&&(U.invalid=l[2]),l[3]!==void 0&&(U.value=l[3]),l[5]!==void 0&&(U.ref=l[5]),t=new ce({props:U}),D.push(()=>S(t,"invalid",q)),D.push(()=>S(t,"value",A)),D.push(()=>S(t,"ref",P));function R(o){l[27](o)}function H(o){l[28](o)}function V(o){l[29](o)}let O={invalidText:l[10],labelText:"Password",password:!0};return l[8]!==void 0&&(O.invalid=l[8]),l[9]!==void 0&&(O.value=l[9]),l[6]!==void 0&&(O.ref=l[6]),f=new ce({props:O}),D.push(()=>S(f,"invalid",R)),D.push(()=>S(f,"value",H)),D.push(()=>S(f,"ref",V)),_=new Be({props:{stacked:!0,$$slots:{default:[rt]},$$scope:{ctx:l}}}),{c(){d&&d.c(),e=T(),b(t.$$.fragment),u=T(),b(f.$$.fragment),m=T(),b(_.$$.fragment)},l(o){d&&d.l(o),e=N(o),w(t.$$.fragment,o),u=N(o),w(f.$$.fragment,o),m=N(o),w(_.$$.fragment,o)},m(o,v){d&&d.m(o,v),I(o,e,v),k(t,o,v),I(o,u,v),k(f,o,v),I(o,m,v),k(_,o,v),j=!0},p(o,v){o[0]?d?(d.p(o,v),v[0]&1&&g(d,1)):(d=ke(o),d.c(),g(d,1),d.m(e.parentNode,e)):d&&(Y(),$(d,1,1,()=>{d=null}),Z());const C={};v[0]&16&&(C.invalidText=o[4]),!n&&v[0]&4&&(n=!0,C.invalid=o[2],L(()=>n=!1)),!i&&v[0]&8&&(i=!0,C.value=o[3],L(()=>i=!1)),!s&&v[0]&32&&(s=!0,C.ref=o[5],L(()=>s=!1)),t.$set(C);const z={};v[0]&1024&&(z.invalidText=o[10]),!r&&v[0]&256&&(r=!0,z.invalid=o[8],L(()=>r=!1)),!a&&v[0]&512&&(a=!0,z.value=o[9],L(()=>a=!1)),!c&&v[0]&64&&(c=!0,z.ref=o[6],L(()=>c=!1)),f.$set(z);const y={};v[0]&49155|v[1]&256&&(y.$$scope={dirty:v,ctx:o}),_.$set(y)},i(o){j||(g(d),g(t.$$.fragment,o),g(f.$$.fragment,o),g(_.$$.fragment,o),j=!0)},o(o){$(d),$(t.$$.fragment,o),$(f.$$.fragment,o),$(_.$$.fragment,o),j=!1},d(o){d&&d.d(o),o&&h(e),E(t,o),o&&h(u),E(f,o),o&&h(m),E(_,o)}}}function lt(l){let e,t;return e=new Je({props:{$$slots:{default:[it]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},l(n){w(e.$$.fragment,n)},m(n,i){k(e,n,i),t=!0},p(n,i){const s={};i[0]&65535|i[1]&256&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){$(e.$$.fragment,n),t=!1},d(n){E(e,n)}}}function ft(l){let e,t,n,i,s,u;return e=new oe({props:{sm:8,md:8,lg:8,xlg:8,$$slots:{default:[et]},$$scope:{ctx:l}}}),n=new oe({props:{sm:8,md:8,lg:8,xlg:8,$$slots:{default:[lt]},$$scope:{ctx:l}}}),s=new oe({}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment),i=T(),b(s.$$.fragment)},l(f){w(e.$$.fragment,f),t=N(f),w(n.$$.fragment,f),i=N(f),w(s.$$.fragment,f)},m(f,r){k(e,f,r),I(f,t,r),k(n,f,r),I(f,i,r),k(s,f,r),u=!0},p(f,r){const a={};r[1]&256&&(a.$$scope={dirty:r,ctx:f}),e.$set(a);const c={};r[0]&65535|r[1]&256&&(c.$$scope={dirty:r,ctx:f}),n.$set(c)},i(f){u||(g(e.$$.fragment,f),g(n.$$.fragment,f),g(s.$$.fragment,f),u=!0)},o(f){$(e.$$.fragment,f),$(n.$$.fragment,f),$(s.$$.fragment,f),u=!1},d(f){E(e,f),f&&h(t),E(n,f),f&&h(i),E(s,f)}}}function ut(l){let e,t,n,i,s,u,f;return e=new xe({}),i=new Ve({props:{noGutter:!0,$$slots:{default:[ft]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),n=T(),b(i.$$.fragment),this.h()},l(r){w(e.$$.fragment,r),t=N(r),Ce('[data-svelte="svelte-c77y3o"]',document.head).forEach(h),n=N(r),w(i.$$.fragment,r),this.h()},h(){document.title="Login"},m(r,a){k(e,r,a),I(r,t,a),I(r,n,a),k(i,r,a),s=!0,u||(f=ue(window,"keydown",l[16]),u=!0)},p(r,a){const c={};a[0]&65535|a[1]&256&&(c.$$scope={dirty:a,ctx:r}),i.$set(c)},i(r){s||(g(e.$$.fragment,r),g(i.$$.fragment,r),s=!0)},o(r){$(e.$$.fragment,r),$(i.$$.fragment,r),s=!1},d(r){E(e,r),r&&h(t),r&&h(n),E(i,r),u=!1,f()}}}async function ht({page:l,session:e}){let t=l.query.n;return e.user?{status:302,redirect:"/"}:{props:{n:t}}}function ot(l,e,t){let n,i;fe(l,ve,p=>t(32,n=p)),fe(l,pe,p=>t(33,i=p));let{n:s=""}=e;s&&process.browser&&($e(pe,i=s,i),me("/login"));let u,f,r=!1,a=null,c,m,_,j,d=!1,q=null,A,P=!1,U="Invalid Email",R,H,V;const O=p=>{switch(p.keyCode){case 13:u?C():v()}},o=()=>{t(0,u=!u)},v=async function(){if(t(14,H=!0),!a){t(2,r=!0),t(4,c="Empty"),t(14,H=!1);return}if(!q){t(8,d=!0),t(10,A="Empty"),t(14,H=!1);return}t(2,r=!1),t(8,d=!1);let p=await he("auth/login",{username:a,password:q}).finally(ie=>(t(14,H=!1),ie));console.log("login response: ",p),t(4,c=p.usernameError),t(10,A=p.passwordError),t(2,r=p.usernameInvalid),t(8,d=p.passwordInvalid),p.user&&($e(ve,n.user=p.user,n),me("/"))},C=async function(){if(t(15,V=!0),u&&!R){t(11,P=!0),t(12,U="Empty"),t(15,V=!1);return}if(!be(R)){t(11,P=!0),t(12,U="Unaccepted"),t(15,V=!1);return}if(!a){t(2,r=!0),t(4,c="Empty"),joinloading=!1;return}if(be(a)){t(2,r=!0),t(4,c="Unaccepted"),t(15,V=!1);return}if(!q){t(8,d=!0),t(10,A="Empty"),joinloading=!1;return}t(2,r=!1),t(8,d=!1),t(11,P=!1);const p=await he("auth/join",{email:R,username:a,password:q}).finally(ie=>(t(15,V=!1),ie));t(2,r=p.usernameInvalid),t(4,c=p.usernameError),t(8,d=p.passwordInvalid),t(10,A=p.passwordError),p.token?me("/"):console.log("wait what?")};function z(p){P=p,t(11,P)}function y(p){j=p,t(7,j)}function Ne(p){R=p,t(13,R)}function qe(p){r=p,t(2,r)}function Le(p){a=p,t(3,a)}function De(p){m=p,t(5,m)}function Se(p){d=p,t(8,d)}function Pe(p){q=p,t(9,q)}function Ue(p){_=p,t(6,_)}return l.$$set=p=>{"n"in p&&t(20,s=p.n)},l.$$.update=()=>{l.$$.dirty[0]&1&&(u?t(1,f="Login instead"):t(1,f="Join instead"))},[u,f,r,a,c,m,_,j,d,q,A,P,U,R,H,V,O,o,v,C,s,z,y,Ne,qe,Le,De,Se,Pe,Ue]}class vt extends M{constructor(e){super();Q(this,e,ot,ut,W,{n:20},null,[-1,-1])}}export{vt as default,ht as load};
