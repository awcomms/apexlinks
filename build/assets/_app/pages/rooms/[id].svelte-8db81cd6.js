import{S as fe,i as ie,s as ue,a1 as y,j as T,m as G,o as C,x as m,u as d,v as S,e as J,k as B,c as K,n as E,f as j,d as w,G as D,l as I,a5 as ce,O as _e,w as A,a6 as U,I as me,A as $e,a2 as V,t as M,a as Q,g as O,a4 as pe,a7 as ge,E as P,F as z,r as R,K as L,aH as he,aj as W,a3 as de,a8 as X,h as Y}from"../../chunks/vendor-cce9f310.js";import{g as be}from"../../chunks/navigation-51f4a605.js";import{m as F}from"../../chunks/stores-befe408a.js";import{a as ke}from"../../chunks/api-5c0c9630.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/post-5b27026c.js";function Z(a,t,n){const e=a.slice();return e[22]=t[n],e}function x(a,t,n){const e=a.slice();return e[8]=t[n],e}function we(a){let t,n,e,l;function s(r){a[15](r)}function f(r){a[16](r)}let $={};return a[8]!==void 0&&($.value=a[8]),a[6]!==void 0&&($.ref=a[6]),t=new he({props:$}),P.push(()=>z(t,"value",s)),P.push(()=>z(t,"ref",f)),t.$on("focus",a[11]),{c(){T(t.$$.fragment)},l(r){G(t.$$.fragment,r)},m(r,i){C(t,r,i),l=!0},p(r,i){const b={};!n&&i&256&&(n=!0,b.value=r[8],D(()=>n=!1)),!e&&i&64&&(e=!0,b.ref=r[6],D(()=>e=!1)),t.$set(b)},i(r){l||(m(t.$$.fragment,r),l=!0)},o(r){d(t.$$.fragment,r),l=!1},d(r){S(t,r)}}}function ve(a){let t,n;return t=new V({props:{noGutter:!0,$$slots:{default:[we]},$$scope:{ctx:a}}}),{c(){T(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,l){C(t,e,l),n=!0},p(e,l){const s={};l&134218048&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function ee(a){let t,n;return t=new y({props:{noGutter:!0,$$slots:{default:[Ge]},$$scope:{ctx:a}}}),{c(){T(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,l){C(t,e,l),n=!0},p(e,l){const s={};l&134217856&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function je(a){let t;return{c(){t=M("Clear")},l(n){t=O(n,"Clear")},m(n,e){j(n,t,e)},d(n){n&&w(t)}}}function Ne(a){let t=a[8]+"",n;return{c(){n=M(t)},l(e){n=O(e,t)},m(e,l){j(e,n,l)},p(e,l){l&128&&t!==(t=e[8]+"")&&Y(n,t)},d(e){e&&w(n)}}}function te(a){let t,n;return t=new W({props:{filter:!0,$$slots:{default:[Ne]},$$scope:{ctx:a}}}),t.$on("click",function(){X(a[12](a[8]))&&a[12](a[8]).apply(this,arguments)}),{c(){T(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,l){C(t,e,l),n=!0},p(e,l){a=e;const s={};l&134217856&&(s.$$scope={dirty:l,ctx:a}),t.$set(s)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Te(a){let t,n,e,l;t=new W({props:{type:"magenta",$$slots:{default:[je]},$$scope:{ctx:a}}}),t.$on("click",a[13]);let s=a[7],f=[];for(let r=0;r<s.length;r+=1)f[r]=te(x(a,s,r));const $=r=>d(f[r],1,1,()=>{f[r]=null});return{c(){T(t.$$.fragment),n=B();for(let r=0;r<f.length;r+=1)f[r].c();e=I()},l(r){G(t.$$.fragment,r),n=E(r);for(let i=0;i<f.length;i+=1)f[i].l(r);e=I()},m(r,i){C(t,r,i),j(r,n,i);for(let b=0;b<f.length;b+=1)f[b].m(r,i);j(r,e,i),l=!0},p(r,i){const b={};if(i&134217728&&(b.$$scope={dirty:i,ctx:r}),t.$set(b),i&4224){s=r[7];let u;for(u=0;u<s.length;u+=1){const k=x(r,s,u);f[u]?(f[u].p(k,i),m(f[u],1)):(f[u]=te(k),f[u].c(),m(f[u],1),f[u].m(e.parentNode,e))}for(R(),u=s.length;u<f.length;u+=1)$(u);A()}},i(r){if(!l){m(t.$$.fragment,r);for(let i=0;i<s.length;i+=1)m(f[i]);l=!0}},o(r){d(t.$$.fragment,r),f=f.filter(Boolean);for(let i=0;i<f.length;i+=1)d(f[i]);l=!1},d(r){S(t,r),r&&w(n),U(f,r),r&&w(e)}}}function Ge(a){let t,n;return t=new V({props:{$$slots:{default:[Te]},$$scope:{ctx:a}}}),{c(){T(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,l){C(t,e,l),n=!0},p(e,l){const s={};l&134217856&&(s.$$scope={dirty:l,ctx:e}),t.$set(s)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Ce(a){let t=a[22].name+"",n;return{c(){n=M(t)},l(e){n=O(e,t)},m(e,l){j(e,n,l)},p(e,l){l&1&&t!==(t=e[22].name+"")&&Y(n,t)},d(e){e&&w(n)}}}function Se(a){let t,n,e;return n=new de({props:{href:"",$$slots:{default:[Ce]},$$scope:{ctx:a}}}),n.$on("click",function(){X(a[9](a[22]))&&a[9](a[22]).apply(this,arguments)}),{c(){t=J("div"),T(n.$$.fragment)},l(l){t=K(l,"DIV",{});var s=Q(t);G(n.$$.fragment,s),s.forEach(w)},m(l,s){j(l,t,s),C(n,t,null),e=!0},p(l,s){a=l;const f={};s&134217729&&(f.$$scope={dirty:s,ctx:a}),n.$set(f)},i(l){e||(m(n.$$.fragment,l),e=!0)},o(l){d(n.$$.fragment,l),e=!1},d(l){l&&w(t),S(n)}}}function ne(a){let t,n,e,l;return e=new y({props:{noGutter:!0,$$slots:{default:[Se]},$$scope:{ctx:a}}}),{c(){t=J("br"),n=B(),T(e.$$.fragment)},l(s){t=K(s,"BR",{}),n=E(s),G(e.$$.fragment,s)},m(s,f){j(s,t,f),j(s,n,f),C(e,s,f),l=!0},p(s,f){const $={};f&134217729&&($.$$scope={dirty:f,ctx:s}),e.$set($)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){s&&w(t),s&&w(n),S(e,s)}}}function le(a){let t,n;return t=new y({props:{noGutter:!0,$$slots:{default:[Be]},$$scope:{ctx:a}}}),{c(){T(t.$$.fragment)},l(e){G(t.$$.fragment,e)},m(e,l){C(t,e,l),n=!0},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){d(t.$$.fragment,e),n=!1},d(e){S(t,e)}}}function Be(a){let t,n;return{c(){t=J("p"),n=M("There don't seem to be any results")},l(e){t=K(e,"P",{});var l=Q(t);n=O(l,"There don't seem to be any results"),l.forEach(w)},m(e,l){j(e,t,l),pe(t,n)},d(e){e&&w(t)}}}function re(a){let t,n,e,l;function s(r){a[17](r)}function f(r){a[18](r)}let $={loop:!0};return a[3]!==void 0&&($.page=a[3]),a[2]!==void 0&&($.total=a[2]),t=new ge({props:$}),P.push(()=>z(t,"page",s)),P.push(()=>z(t,"total",f)),{c(){T(t.$$.fragment)},l(r){G(t.$$.fragment,r)},m(r,i){C(t,r,i),l=!0},p(r,i){const b={};!n&&i&8&&(n=!0,b.page=r[3],D(()=>n=!1)),!e&&i&4&&(e=!0,b.total=r[2],D(()=>e=!1)),t.$set(b)},i(r){l||(m(t.$$.fragment,r),l=!0)},o(r){d(t.$$.fragment,r),l=!1},d(r){S(t,r)}}}function Ee(a){let t,n,e,l,s,f,$,r,i,b;n=new y({props:{noGutter:!0,$$slots:{default:[ve]},$$scope:{ctx:a}}});let u=a[4]&&ee(a),k=a[0],_=[];for(let o=0;o<k.length;o+=1)_[o]=ne(Z(a,k,o));const H=o=>d(_[o],1,1,()=>{_[o]=null});let h=a[5]&&a[1]<1&&le(a),g=a[1]>10&&re(a);return{c(){t=B(),T(n.$$.fragment),e=B(),u&&u.c(),l=B();for(let o=0;o<_.length;o+=1)_[o].c();s=B(),h&&h.c(),f=B(),g&&g.c(),$=I(),this.h()},l(o){ce('[data-svelte="svelte-4ozmlv"]',document.head).forEach(w),t=E(o),G(n.$$.fragment,o),e=E(o),u&&u.l(o),l=E(o);for(let N=0;N<_.length;N+=1)_[N].l(o);s=E(o),h&&h.l(o),f=E(o),g&&g.l(o),$=I(),this.h()},h(){document.title="My Rooms"},m(o,c){j(o,t,c),C(n,o,c),j(o,e,c),u&&u.m(o,c),j(o,l,c);for(let N=0;N<_.length;N+=1)_[N].m(o,c);j(o,s,c),h&&h.m(o,c),j(o,f,c),g&&g.m(o,c),j(o,$,c),r=!0,i||(b=_e(window,"keydown",a[10]),i=!0)},p(o,[c]){const N={};if(c&134218048&&(N.$$scope={dirty:c,ctx:o}),n.$set(N),o[4]?u?(u.p(o,c),c&16&&m(u,1)):(u=ee(o),u.c(),m(u,1),u.m(l.parentNode,l)):u&&(R(),d(u,1,1,()=>{u=null}),A()),c&513){k=o[0];let v;for(v=0;v<k.length;v+=1){const q=Z(o,k,v);_[v]?(_[v].p(q,c),m(_[v],1)):(_[v]=ne(q),_[v].c(),m(_[v],1),_[v].m(s.parentNode,s))}for(R(),v=k.length;v<_.length;v+=1)H(v);A()}o[5]&&o[1]<1?h?c&34&&m(h,1):(h=le(o),h.c(),m(h,1),h.m(f.parentNode,f)):h&&(R(),d(h,1,1,()=>{h=null}),A()),o[1]>10?g?(g.p(o,c),c&2&&m(g,1)):(g=re(o),g.c(),m(g,1),g.m($.parentNode,$)):g&&(R(),d(g,1,1,()=>{g=null}),A())},i(o){if(!r){m(n.$$.fragment,o),m(u);for(let c=0;c<k.length;c+=1)m(_[c]);m(h),m(g),r=!0}},o(o){d(n.$$.fragment,o),d(u),_=_.filter(Boolean);for(let c=0;c<_.length;c+=1)d(_[c]);d(h),d(g),r=!1},d(o){o&&w(t),S(n,o),o&&w(e),u&&u.d(o),o&&w(l),U(_,o),o&&w(s),h&&h.d(o),o&&w(f),g&&g.d(o),o&&w($),i=!1,b()}}}async function Oe({page:a,session:t}){if(!t.user)return{status:302,redirect:"/login"};let{id:e}=a.params,l=JSON.stringify([]),s=`xrooms?id=${e}&tags=${l}&page=1`,f=await ke.get(s);if(f.error)return{status:f.status,error:f.error};Array.isArray(f.items);let $=f.total,r=f.pages;return{props:{room,total:$,pages:r,id:e}}}function Ae(a,t,n){let e;me(a,F,p=>n(7,e=p));let{rooms:l=[]}=t,{total:s=0}=t,{pages:f=0}=t,{id:$}=t;$e(()=>{_.focus()});let r=0,i,b,u,k,_,H=p=>{be(`/room/${p.id}`)},h=p=>{switch(p.keyCode){case 13:b==_&&o()}},g=()=>{b=_,e.length>0&&n(4,i=!0)},o=()=>{k&&!e.includes(k)&&(L(F,e=[...e,k],e),n(4,i=!0),n(8,k=""))},c=p=>{L(F,e=e.filter(se=>se!=p),e)},N=()=>{L(F,e=[],e),n(4,i=!1)};function v(p){k=p,n(8,k)}function q(p){_=p,n(6,_)}function ae(p){r=p,n(3,r)}function oe(p){f=p,n(2,f)}return a.$$set=p=>{"rooms"in p&&n(0,l=p.rooms),"total"in p&&n(1,s=p.total),"pages"in p&&n(2,f=p.pages),"id"in p&&n(14,$=p.id)},[l,s,f,r,i,u,_,e,k,H,h,g,c,N,$,v,q,ae,oe]}class Pe extends fe{constructor(t){super();ie(this,t,Ae,Ee,ue,{rooms:0,total:1,pages:2,id:14})}}export{Pe as default,Oe as load};
