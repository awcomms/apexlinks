import{S as t,i as e,s as n,a1 as o,j as r,m as s,o as a,v as $,r as l,w as c,e as f,k as i,c as m,n as u,f as p,d as g,G as d,l as h,a5 as x,O as y,u as w,a6 as v,I as k,z as j,a2 as b,t as G,a as N,g as B,a4 as E,a7 as C,E as z,F as A,B as I,K as O,aH as R,aj as S,a3 as T,a8 as D,h as F}from"../../chunks/vendor-83a11e53.js";import{g as H}from"../../chunks/navigation-20968cc5.js";import{m as J}from"../../chunks/stores-744e0037.js";import{a as K}from"../../chunks/api-5c0c9630.js";import"../../chunks/singletons-bb9012b7.js";import"../../chunks/post-5b27026c.js";function M(t,e,n){const o=t.slice();return o[22]=e[n],o}function P(t,e,n){const o=t.slice();return o[8]=e[n],o}function V(t){let e,n,o,f;function i(e){t[15](e)}function m(e){t[16](e)}let u={};return void 0!==t[8]&&(u.value=t[8]),void 0!==t[6]&&(u.ref=t[6]),e=new R({props:u}),z.push((()=>A(e,"value",i))),z.push((()=>A(e,"ref",m))),e.$on("focus",t[11]),{c(){r(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,n){a(e,t,n),f=!0},p(t,r){const s={};!n&&256&r&&(n=!0,s.value=t[8],d((()=>n=!1))),!o&&64&r&&(o=!0,s.ref=t[6],d((()=>o=!1))),e.$set(s)},i(t){f||($(e.$$.fragment,t),f=!0)},o(t){l(e.$$.fragment,t),f=!1},d(t){c(e,t)}}}function q(t){let e,n;return e=new b({props:{noGutter:!0,$$slots:{default:[V]},$$scope:{ctx:t}}}),{c(){r(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,o){a(e,t,o),n=!0},p(t,n){const o={};134218048&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){l(e.$$.fragment,t),n=!1},d(t){c(e,t)}}}function L(t){let e,n;return e=new o({props:{noGutter:!0,$$slots:{default:[Y]},$$scope:{ctx:t}}}),{c(){r(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,o){a(e,t,o),n=!0},p(t,n){const o={};134217856&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){l(e.$$.fragment,t),n=!1},d(t){c(e,t)}}}function Q(t){let e;return{c(){e=G("Clear")},l(t){e=B(t,"Clear")},m(t,n){p(t,e,n)},d(t){t&&g(e)}}}function U(t){let e,n=t[8]+"";return{c(){e=G(n)},l(t){e=B(t,n)},m(t,n){p(t,e,n)},p(t,o){128&o&&n!==(n=t[8]+"")&&F(e,n)},d(t){t&&g(e)}}}function W(t){let e,n;return e=new S({props:{filter:!0,$$slots:{default:[U]},$$scope:{ctx:t}}}),e.$on("click",(function(){D(t[12](t[8]))&&t[12](t[8]).apply(this,arguments)})),{c(){r(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,o){a(e,t,o),n=!0},p(n,o){t=n;const r={};134217856&o&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){l(e.$$.fragment,t),n=!1},d(t){c(e,t)}}}function X(t){let e,n,o,f;e=new S({props:{type:"magenta",$$slots:{default:[Q]},$$scope:{ctx:t}}}),e.$on("click",t[13]);let m=t[7],d=[];for(let r=0;r<m.length;r+=1)d[r]=W(P(t,m,r));const x=t=>l(d[t],1,1,(()=>{d[t]=null}));return{c(){r(e.$$.fragment),n=i();for(let t=0;t<d.length;t+=1)d[t].c();o=h()},l(t){s(e.$$.fragment,t),n=u(t);for(let e=0;e<d.length;e+=1)d[e].l(t);o=h()},m(t,r){a(e,t,r),p(t,n,r);for(let e=0;e<d.length;e+=1)d[e].m(t,r);p(t,o,r),f=!0},p(t,n){const r={};if(134217728&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r),4224&n){let e;for(m=t[7],e=0;e<m.length;e+=1){const r=P(t,m,e);d[e]?(d[e].p(r,n),$(d[e],1)):(d[e]=W(r),d[e].c(),$(d[e],1),d[e].m(o.parentNode,o))}for(I(),e=m.length;e<d.length;e+=1)x(e);w()}},i(t){if(!f){$(e.$$.fragment,t);for(let t=0;t<m.length;t+=1)$(d[t]);f=!0}},o(t){l(e.$$.fragment,t),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)l(d[e]);f=!1},d(t){c(e,t),t&&g(n),v(d,t),t&&g(o)}}}function Y(t){let e,n;return e=new b({props:{$$slots:{default:[X]},$$scope:{ctx:t}}}),{c(){r(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,o){a(e,t,o),n=!0},p(t,n){const o={};134217856&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){l(e.$$.fragment,t),n=!1},d(t){c(e,t)}}}function Z(t){let e,n=t[22].name+"";return{c(){e=G(n)},l(t){e=B(t,n)},m(t,n){p(t,e,n)},p(t,o){1&o&&n!==(n=t[22].name+"")&&F(e,n)},d(t){t&&g(e)}}}function _(t){let e,n,o;return n=new T({props:{href:"",$$slots:{default:[Z]},$$scope:{ctx:t}}}),n.$on("click",(function(){D(t[9](t[22]))&&t[9](t[22]).apply(this,arguments)})),{c(){e=f("div"),r(n.$$.fragment)},l(t){e=m(t,"DIV",{});var o=N(e);s(n.$$.fragment,o),o.forEach(g)},m(t,r){p(t,e,r),a(n,e,null),o=!0},p(e,o){t=e;const r={};134217729&o&&(r.$$scope={dirty:o,ctx:t}),n.$set(r)},i(t){o||($(n.$$.fragment,t),o=!0)},o(t){l(n.$$.fragment,t),o=!1},d(t){t&&g(e),c(n)}}}function tt(t){let e,n,d,h;return d=new o({props:{noGutter:!0,$$slots:{default:[_]},$$scope:{ctx:t}}}),{c(){e=f("br"),n=i(),r(d.$$.fragment)},l(t){e=m(t,"BR",{}),n=u(t),s(d.$$.fragment,t)},m(t,o){p(t,e,o),p(t,n,o),a(d,t,o),h=!0},p(t,e){const n={};134217729&e&&(n.$$scope={dirty:e,ctx:t}),d.$set(n)},i(t){h||($(d.$$.fragment,t),h=!0)},o(t){l(d.$$.fragment,t),h=!1},d(t){t&&g(e),t&&g(n),c(d,t)}}}function et(t){let e,n;return e=new o({props:{noGutter:!0,$$slots:{default:[nt]},$$scope:{ctx:t}}}),{c(){r(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,o){a(e,t,o),n=!0},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){l(e.$$.fragment,t),n=!1},d(t){c(e,t)}}}function nt(t){let e,n;return{c(){e=f("p"),n=G("There don't seem to be any results")},l(t){e=m(t,"P",{});var o=N(e);n=B(o,"There don't seem to be any results"),o.forEach(g)},m(t,o){p(t,e,o),E(e,n)},d(t){t&&g(e)}}}function ot(t){let e,n,o,f;function i(e){t[17](e)}function m(e){t[18](e)}let u={loop:!0};return void 0!==t[3]&&(u.page=t[3]),void 0!==t[2]&&(u.total=t[2]),e=new C({props:u}),z.push((()=>A(e,"page",i))),z.push((()=>A(e,"total",m))),{c(){r(e.$$.fragment)},l(t){s(e.$$.fragment,t)},m(t,n){a(e,t,n),f=!0},p(t,r){const s={};!n&&8&r&&(n=!0,s.page=t[3],d((()=>n=!1))),!o&&4&r&&(o=!0,s.total=t[2],d((()=>o=!1))),e.$set(s)},i(t){f||($(e.$$.fragment,t),f=!0)},o(t){l(e.$$.fragment,t),f=!1},d(t){c(e,t)}}}function rt(t){let e,n,f,m,d,k,j,b,G,N;n=new o({props:{noGutter:!0,$$slots:{default:[q]},$$scope:{ctx:t}}});let B=t[4]&&L(t),E=t[0],C=[];for(let o=0;o<E.length;o+=1)C[o]=tt(M(t,E,o));const z=t=>l(C[t],1,1,(()=>{C[t]=null}));let A=t[5]&&t[1]<1&&et(t),O=t[1]>10&&ot(t);return{c(){e=i(),r(n.$$.fragment),f=i(),B&&B.c(),m=i();for(let t=0;t<C.length;t+=1)C[t].c();d=i(),A&&A.c(),k=i(),O&&O.c(),j=h(),this.h()},l(t){x('[data-svelte="svelte-4ozmlv"]',document.head).forEach(g),e=u(t),s(n.$$.fragment,t),f=u(t),B&&B.l(t),m=u(t);for(let e=0;e<C.length;e+=1)C[e].l(t);d=u(t),A&&A.l(t),k=u(t),O&&O.l(t),j=h(),this.h()},h(){document.title="My Rooms"},m(o,r){p(o,e,r),a(n,o,r),p(o,f,r),B&&B.m(o,r),p(o,m,r);for(let t=0;t<C.length;t+=1)C[t].m(o,r);p(o,d,r),A&&A.m(o,r),p(o,k,r),O&&O.m(o,r),p(o,j,r),b=!0,G||(N=y(window,"keydown",t[10]),G=!0)},p(t,[e]){const o={};if(134218048&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o),t[4]?B?(B.p(t,e),16&e&&$(B,1)):(B=L(t),B.c(),$(B,1),B.m(m.parentNode,m)):B&&(I(),l(B,1,1,(()=>{B=null})),w()),513&e){let n;for(E=t[0],n=0;n<E.length;n+=1){const o=M(t,E,n);C[n]?(C[n].p(o,e),$(C[n],1)):(C[n]=tt(o),C[n].c(),$(C[n],1),C[n].m(d.parentNode,d))}for(I(),n=E.length;n<C.length;n+=1)z(n);w()}t[5]&&t[1]<1?A?34&e&&$(A,1):(A=et(t),A.c(),$(A,1),A.m(k.parentNode,k)):A&&(I(),l(A,1,1,(()=>{A=null})),w()),t[1]>10?O?(O.p(t,e),2&e&&$(O,1)):(O=ot(t),O.c(),$(O,1),O.m(j.parentNode,j)):O&&(I(),l(O,1,1,(()=>{O=null})),w())},i(t){if(!b){$(n.$$.fragment,t),$(B);for(let t=0;t<E.length;t+=1)$(C[t]);$(A),$(O),b=!0}},o(t){l(n.$$.fragment,t),l(B),C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)l(C[e]);l(A),l(O),b=!1},d(t){t&&g(e),c(n,t),t&&g(f),B&&B.d(t),t&&g(m),v(C,t),t&&g(d),A&&A.d(t),t&&g(k),O&&O.d(t),t&&g(j),G=!1,N()}}}async function st({page:t,session:e}){if(!e.user)return{status:302,redirect:"/login"};let{id:n}=t.params,o=`xrooms?id=${n}&tags=${JSON.stringify([])}&page=1`,r=await K.get(o);if(r.error)return{status:r.status,error:r.error};Array.isArray(r.items);let s=r.total,a=r.pages;return{props:{room:room,total:s,pages:a,id:n}}}function at(t,e,n){let o;k(t,J,(t=>n(7,o=t)));let{rooms:r=[]}=e,{total:s=0}=e,{pages:a=0}=e,{id:$}=e;j((()=>{i.focus()}));let l,c,f,i,m=0,u=()=>{f&&!o.includes(f)&&(O(J,o=[...o,f],o),n(4,l=!0),n(8,f=""))};return t.$$set=t=>{"rooms"in t&&n(0,r=t.rooms),"total"in t&&n(1,s=t.total),"pages"in t&&n(2,a=t.pages),"id"in t&&n(14,$=t.id)},[r,s,a,m,l,undefined,i,o,f,t=>{H(`/room/${t.id}`)},t=>{switch(t.keyCode){case 13:c==i&&u()}},()=>{c=i,o.length>0&&n(4,l=!0)},t=>{O(J,o=o.filter((e=>e!=t)),o)},()=>{O(J,o=[],o),n(4,l=!1)},$,function(t){f=t,n(8,f)},function(t){i=t,n(6,i)},function(t){m=t,n(3,m)},function(t){a=t,n(2,a)}]}export default class extends t{constructor(t){super(),e(this,t,at,rt,n,{rooms:0,total:1,pages:2,id:14})}}export{st as load};
