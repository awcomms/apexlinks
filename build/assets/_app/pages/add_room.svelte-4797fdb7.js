import{S as t,i as e,s as n,j as s,m as a,o as r,G as $,x as o,u as c,v as i,a5 as f,k as m,ab as u,d as l,n as p,f as d,w as g,I as v,E as h,F as x,a6 as k,r as w,aC as y,aD as E,K as T,l as j,aq as b,B as I,e as N,t as A,c as G,a as D,g as U,al as q,a8 as B,O as C,p as F,U as K}from"../chunks/vendor-c7b4d8a9.js";import{I as O}from"../chunks/Input-8c5d8c16.js";import{T as P}from"../chunks/Tag-6c3f4b89.js";import{c as R,o as S}from"../chunks/stores-fc5807c6.js";import{g as V}from"../chunks/navigation-51f4a605.js";import{g as z,a as H}from"../chunks/api-eadfccdc.js";import"../chunks/singletons-12a22614.js";function J(t){let e,n,f;function m(e){t[11](e)}let u={};return void 0!==t[7]&&(u.tags=t[7]),e=new P({props:u}),h.push((()=>x(e,"tags",m))),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,n){r(e,t,n),f=!0},p(t,s){const a={};!n&&128&s&&(n=!0,a.tags=t[7],$((()=>n=!1))),e.$set(a)},i(t){f||(o(e.$$.fragment,t),f=!0)},o(t){c(e.$$.fragment,t),f=!1},d(t){i(e,t)}}}function L(t){let e,n,f,m;function u(e){t[14](e)}function l(e){t[15](e)}let p={invalidText:t[4],labelText:"User"};return void 0!==t[2]&&(p.invalid=t[2]),void 0!==t[0]&&(p.value=t[0]),e=new O({props:p}),h.push((()=>x(e,"invalid",u))),h.push((()=>x(e,"value",l))),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,n){r(e,t,n),m=!0},p(t,s){const a={};16&s&&(a.invalidText=t[4]),!n&&4&s&&(n=!0,a.invalid=t[2],$((()=>n=!1))),!f&&1&s&&(f=!0,a.value=t[0],$((()=>f=!1))),e.$set(a)},i(t){m||(o(e.$$.fragment,t),m=!0)},o(t){c(e.$$.fragment,t),m=!1},d(t){i(e,t)}}}function M(t){let e,n,f,u,v,k;function y(e){t[12](e)}function E(e){t[13](e)}let T={invalidText:t[3],labelText:"Name"};void 0!==t[1]&&(T.invalid=t[1]),void 0!==t[6]&&(T.value=t[6]),e=new O({props:T}),h.push((()=>x(e,"invalid",y))),h.push((()=>x(e,"value",E)));let b=!t[8]&&L(t);return{c(){s(e.$$.fragment),u=m(),b&&b.c(),v=j()},l(t){a(e.$$.fragment,t),u=p(t),b&&b.l(t),v=j()},m(t,n){r(e,t,n),d(t,u,n),b&&b.m(t,n),d(t,v,n),k=!0},p(t,s){const a={};8&s&&(a.invalidText=t[3]),!n&&2&s&&(n=!0,a.invalid=t[1],$((()=>n=!1))),!f&&64&s&&(f=!0,a.value=t[6],$((()=>f=!1))),e.$set(a),t[8]?b&&(w(),c(b,1,1,(()=>{b=null})),g()):b?(b.p(t,s),256&s&&o(b,1)):(b=L(t),b.c(),o(b,1),b.m(v.parentNode,v))},i(t){k||(o(e.$$.fragment,t),o(b),k=!0)},o(t){c(e.$$.fragment,t),c(b),k=!1},d(t){i(e,t),t&&l(u),b&&b.d(t),t&&l(v)}}}function Q(t){let e,n;return e=new y({props:{$$slots:{default:[M]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524639&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function W(t){let e,n;return e=new k({props:{$$slots:{default:[Q]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524639&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function X(t){let e,n;return e=new K({}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function Y(t){let e,n,s,a,r,$,i,f=t[5]&&X(),u=[t[18]],v={};for(let o=0;o<u.length;o+=1)v=I(v,u[o]);return{c(){e=N("div"),n=N("p"),s=A("Add"),a=m(),f&&f.c(),this.h()},l(t){e=G(t,"DIV",{});var r=D(e);n=G(r,"P",{});var $=D(n);s=U($,"Add"),$.forEach(l),a=p(r),f&&f.l(r),r.forEach(l),this.h()},h(){q(e,v)},m(o,c){d(o,e,c),B(e,n),B(n,s),B(e,a),f&&f.m(e,null),r=!0,$||(i=C(e,"click",t[9]),$=!0)},p(t,n){t[5]?f?32&n&&o(f,1):(f=X(),f.c(),o(f,1),f.m(e,null)):f&&(w(),c(f,1,1,(()=>{f=null})),g()),q(e,v=F(u,[262144&n&&t[18]]))},i(t){r||(o(f),r=!0)},o(t){c(f),r=!1},d(t){t&&l(e),f&&f.d(),$=!1,i()}}}function Z(t){let e,n;return e=new b({props:{as:!0,$$slots:{default:[Y,({props:t})=>({18:t}),({props:t})=>t?262144:0]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};786464&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function _(t){let e,n;return e=new E({props:{stacked:!0,$$slots:{default:[Z]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524320&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function tt(t){let e,n;return e=new k({props:{$$slots:{default:[_]},$$scope:{ctx:t}}}),{c(){s(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){r(e,t,s),n=!0},p(t,n){const s={};524320&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){c(e.$$.fragment,t),n=!1},d(t){i(e,t)}}}function et(t){let e,n,$,v,h,x,k=t[8]&&J(t);return $=new f({props:{noGutter:!0,$$slots:{default:[W]},$$scope:{ctx:t}}}),h=new f({props:{noGutter:!0,$$slots:{default:[tt]},$$scope:{ctx:t}}}),{c(){e=m(),k&&k.c(),n=m(),s($.$$.fragment),v=m(),s(h.$$.fragment),this.h()},l(t){u('[data-svelte="svelte-1mx7c7r"]',document.head).forEach(l),e=p(t),k&&k.l(t),n=p(t),a($.$$.fragment,t),v=p(t),a(h.$$.fragment,t),this.h()},h(){document.title="Add Room"},m(t,s){d(t,e,s),k&&k.m(t,s),d(t,n,s),r($,t,s),d(t,v,s),r(h,t,s),x=!0},p(t,[e]){t[8]?k?(k.p(t,e),256&e&&o(k,1)):(k=J(t),k.c(),o(k,1),k.m(n.parentNode,n)):k&&(w(),c(k,1,1,(()=>{k=null})),g());const s={};524639&e&&(s.$$scope={dirty:e,ctx:t}),$.$set(s);const a={};524320&e&&(a.$$scope={dirty:e,ctx:t}),h.$set(a)},i(t){x||(o(k),o($.$$.fragment,t),o(h.$$.fragment,t),x=!0)},o(t){c(k),c($.$$.fragment,t),c(h.$$.fragment,t),x=!1},d(t){t&&l(e),k&&k.d(t),t&&l(n),i($,t),t&&l(v),i(h,t)}}}async function nt({session:t}){return t.token?{props:{user:user}}:{status:302,redirect:"/login"}}function st(t,e,n){let s,a,r;v(t,R,(t=>n(16,s=t))),v(t,username,(t=>n(0,a=t))),v(t,S,(t=>n(8,r=t)));let $,o,c,i,f,m,u,{token:l=""}=e;const p=async()=>{if(""==a)return;(await z(`users/${a}`)||{}).id?n(2,o=!1):(n(2,o=!0),n(4,i="Not found"))};return t.$$set=t=>{"token"in t&&n(10,l=t.token)},t.$$.update=()=>{1&t.$$.dirty&&process.browser&&a&&setTimeout(p,123)},[a,$,o,c,i,f,m,u,r,async function(){if(n(5,f=!0),!m)return n(1,$=!0),n(3,c="Empty"),void n(5,f=!1);if(!a)return n(2,o=!0),n(4,i="Empty"),void n(5,f=!1);let t={username:a,name:m,tags:u},e=await H("rooms",t,l);e.nameError?(n(3,c=e.nameError),n(1,$=!0),n(5,f=!1)):e.userError?(n(4,i=e.userError),n(2,o=!0),n(5,f=!1)):e.id&&(T(R,s=m,s),n(5,f=!1),V(`/room/${e.id}`))},l,function(t){u=t,n(7,u)},function(t){$=t,n(1,$)},function(t){m=t,n(6,m)},function(t){o=t,n(2,o)},function(t){a=t,username.set(a)}]}class at extends t{constructor(t){super(),e(this,t,st,et,n,{token:10})}}export{at as default,nt as load};
