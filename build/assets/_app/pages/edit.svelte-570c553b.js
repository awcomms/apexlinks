import{S as e,i as t,s as n,e as a,ab as $,c as s,a as r,d as o,ag as c,b as i,a8 as f,ah as l,A as u,E as m,F as p,a5 as d,j as g,k as h,m as v,n as w,o as x,f as k,O as b,G as y,x as T,u as j,v as E,a6 as I,l as A,r as P,w as z,aE as C,aC as S,aq as G,aA as F,aF as N,B as U,t as _,g as R,al as D,aj as K,p as L,U as V}from"../chunks/vendor-c7b4d8a9.js";import{g as q,p as B}from"../chunks/api-eadfccdc.js";import{g as H}from"../chunks/navigation-51f4a605.js";import{F as M}from"../chunks/Fields-fc88a2b6.js";import{I as O}from"../chunks/Input-8c5d8c16.js";import{I as Y}from"../chunks/Image-64a8c94e.js";import{T as J}from"../chunks/Tag-6c3f4b89.js";import{b as Q,c as W}from"../chunks/utils-80e4c2bc.js";import"../chunks/singletons-12a22614.js";function X(e){let t,n;return{c(){t=a("script"),this.h()},l(e){const n=$('[data-svelte="svelte-1eu2i5p"]',document.head);t=s(n,"SCRIPT",{src:!0}),r(t).forEach(o),n.forEach(o),this.h()},h(){c(t.src,n="https://js.paystack.co/v1/inline.js")||i(t,"src","https://js.paystack.co/v1/inline.js")},m(e,n){f(document.head,t)},p:l,i:l,o:l,d(e){o(t)}}}function Z(e,t,n){let{config:a={}}=t,$=!1;return u((()=>{n(1,$=!0)})),e.$$set=e=>{"config"in e&&n(0,a=e.config)},e.$$.update=()=>{3&e.$$.dirty&&$&&a.open&&PaystackPop.setup(a).openIframe()},[a,$]}class ee extends e{constructor(e){super(),t(this,e,Z,X,n,{config:0})}}function te(e){let t,n;return t=new G({props:{size:"small",$$slots:{default:[ae]},$$scope:{ctx:e}}}),t.$on("click",e[22]),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){x(t,e,a),n=!0},p(e,n){const a={};2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(T(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function ne(e){let t,n,a,$;return t=new G({props:{size:"small",$$slots:{default:[$e]},$$scope:{ctx:e}}}),t.$on("click",e[20]),a=new G({props:{size:"small",$$slots:{default:[se]},$$scope:{ctx:e}}}),a.$on("click",e[21]),{c(){g(t.$$.fragment),n=h(),g(a.$$.fragment)},l(e){v(t.$$.fragment,e),n=w(e),v(a.$$.fragment,e)},m(e,s){x(t,e,s),k(e,n,s),x(a,e,s),$=!0},p(e,n){const $={};2048&n[1]&&($.$$scope={dirty:n,ctx:e}),t.$set($);const s={};2048&n[1]&&(s.$$scope={dirty:n,ctx:e}),a.$set(s)},i(e){$||(T(t.$$.fragment,e),T(a.$$.fragment,e),$=!0)},o(e){j(t.$$.fragment,e),j(a.$$.fragment,e),$=!1},d(e){E(t,e),e&&o(n),E(a,e)}}}function ae(e){let t;return{c(){t=_("Subscribe")},l(e){t=R(e,"Subscribe")},m(e,n){k(e,t,n)},d(e){e&&o(t)}}}function $e(e){let t;return{c(){t=_("Renew subscription")},l(e){t=R(e,"Renew subscription")},m(e,n){k(e,t,n)},d(e){e&&o(t)}}}function se(e){let t;return{c(){t=_("Change card")},l(e){t=R(e,"Change card")},m(e,n){k(e,t,n)},d(e){e&&o(t)}}}function re(e){let t,n,a,$;const s=[ne,te],r=[];function c(e,t){return e[0].paid?0:1}return t=c(e),n=r[t]=s[t](e),{c(){n.c(),a=A()},l(e){n.l(e),a=A()},m(e,n){r[t].m(e,n),k(e,a,n),$=!0},p(e,$){let o=t;t=c(e),t===o?r[t].p(e,$):(P(),j(r[o],1,1,(()=>{r[o]=null})),z(),n=r[t],n?n.p(e,$):(n=r[t]=s[t](e),n.c()),T(n,1),n.m(a.parentNode,a))},i(e){$||(T(n),$=!0)},o(e){j(n),$=!1},d(e){r[t].d(e),e&&o(a)}}}function oe(e){let t,n,a;function $(t){e[24](t)}let s={labelText:"Hidden"};return void 0!==e[4]&&(s.checked=e[4]),t=new C({props:s}),m.push((()=>p(t,"checked",$))),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){x(t,e,n),a=!0},p(e,a){const $={};!n&&16&a[0]&&(n=!0,$.checked=e[4],y((()=>n=!1))),t.$set($)},i(e){a||(T(t.$$.fragment,e),a=!0)},o(e){j(t.$$.fragment,e),a=!1},d(e){E(t,e)}}}function ce(e){let t,n;return t=new I({props:{$$slots:{default:[oe]},$$scope:{ctx:e}}}),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){x(t,e,a),n=!0},p(e,n){const a={};16&n[0]|2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(T(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function ie(e){let t,n,a;function $(t){e[26](t)}let s={pin:!0};return void 0!==e[12]&&(s.fields=e[12]),t=new M({props:s}),m.push((()=>p(t,"fields",$))),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){x(t,e,n),a=!0},p(e,a){const $={};!n&&4096&a[0]&&(n=!0,$.fields=e[12],y((()=>n=!1))),t.$set($)},i(e){a||(T(t.$$.fragment,e),a=!0)},o(e){j(t.$$.fragment,e),a=!1},d(e){E(t,e)}}}function fe(e){let t,n;return t=new I({props:{$$slots:{default:[ie]},$$scope:{ctx:e}}}),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){x(t,e,a),n=!0},p(e,n){const a={};4096&n[0]|2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(T(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function le(e){let t,n,a,$,s,r,c,i,f,l,u,d,b,I,A,P,z,S,G,U,_,R,D,K,L,V;function q(t){e[27](t)}function B(t){e[28](t)}function H(t){e[29](t)}let M={labelText:"Username"};function Y(t){e[30](t)}void 0!==e[15]&&(M.invalidText=e[15]),void 0!==e[14]&&(M.invalid=e[14]),void 0!==e[3]&&(M.value=e[3]),t=new O({props:M}),m.push((()=>p(t,"invalidText",q))),m.push((()=>p(t,"invalid",B))),m.push((()=>p(t,"value",H)));let J={labelText:"Show email in profile"};function Q(t){e[31](t)}void 0!==e[2]&&(J.checked=e[2]),r=new C({props:J}),m.push((()=>p(r,"checked",Y)));let W={labelText:"Email"};function X(t){e[32](t)}void 0!==e[8]&&(W.value=e[8]),f=new F({props:W}),m.push((()=>p(f,"value",Q)));let Z={labelText:"Name"};function ee(t){e[33](t)}void 0!==e[11]&&(Z.value=e[11]),d=new F({props:Z}),m.push((()=>p(d,"value",X)));let te={labelText:"Phone"};function ne(t){e[34](t)}void 0!==e[9]&&(te.value=e[9]),A=new F({props:te}),m.push((()=>p(A,"value",ee)));let ae={labelText:"Address"};function $e(t){e[35](t)}void 0!==e[5]&&(ae.value=e[5]),S=new F({props:ae}),m.push((()=>p(S,"value",ne)));let se={invalid:e[16],invalidText:xe,labelText:"Link"};function re(t){e[36](t)}void 0!==e[6]&&(se.value=e[6]),_=new O({props:se}),m.push((()=>p(_,"value",$e)));let oe={rows:11,placeholder:"About (Markdown)"};return void 0!==e[10]&&(oe.value=e[10]),K=new N({props:oe}),m.push((()=>p(K,"value",re))),{c(){g(t.$$.fragment),s=h(),g(r.$$.fragment),i=h(),g(f.$$.fragment),u=h(),g(d.$$.fragment),I=h(),g(A.$$.fragment),z=h(),g(S.$$.fragment),U=h(),g(_.$$.fragment),D=h(),g(K.$$.fragment)},l(e){v(t.$$.fragment,e),s=w(e),v(r.$$.fragment,e),i=w(e),v(f.$$.fragment,e),u=w(e),v(d.$$.fragment,e),I=w(e),v(A.$$.fragment,e),z=w(e),v(S.$$.fragment,e),U=w(e),v(_.$$.fragment,e),D=w(e),v(K.$$.fragment,e)},m(e,n){x(t,e,n),k(e,s,n),x(r,e,n),k(e,i,n),x(f,e,n),k(e,u,n),x(d,e,n),k(e,I,n),x(A,e,n),k(e,z,n),x(S,e,n),k(e,U,n),x(_,e,n),k(e,D,n),x(K,e,n),V=!0},p(e,s){const o={};!n&&32768&s[0]&&(n=!0,o.invalidText=e[15],y((()=>n=!1))),!a&&16384&s[0]&&(a=!0,o.invalid=e[14],y((()=>a=!1))),!$&&8&s[0]&&($=!0,o.value=e[3],y((()=>$=!1))),t.$set(o);const i={};!c&&4&s[0]&&(c=!0,i.checked=e[2],y((()=>c=!1))),r.$set(i);const u={};!l&&256&s[0]&&(l=!0,u.value=e[8],y((()=>l=!1))),f.$set(u);const m={};!b&&2048&s[0]&&(b=!0,m.value=e[11],y((()=>b=!1))),d.$set(m);const p={};!P&&512&s[0]&&(P=!0,p.value=e[9],y((()=>P=!1))),A.$set(p);const g={};!G&&32&s[0]&&(G=!0,g.value=e[5],y((()=>G=!1))),S.$set(g);const h={};65536&s[0]&&(h.invalid=e[16]),!R&&64&s[0]&&(R=!0,h.value=e[6],y((()=>R=!1))),_.$set(h);const v={};!L&&1024&s[0]&&(L=!0,v.value=e[10],y((()=>L=!1))),K.$set(v)},i(e){V||(T(t.$$.fragment,e),T(r.$$.fragment,e),T(f.$$.fragment,e),T(d.$$.fragment,e),T(A.$$.fragment,e),T(S.$$.fragment,e),T(_.$$.fragment,e),T(K.$$.fragment,e),V=!0)},o(e){j(t.$$.fragment,e),j(r.$$.fragment,e),j(f.$$.fragment,e),j(d.$$.fragment,e),j(A.$$.fragment,e),j(S.$$.fragment,e),j(_.$$.fragment,e),j(K.$$.fragment,e),V=!1},d(e){E(t,e),e&&o(s),E(r,e),e&&o(i),E(f,e),e&&o(u),E(d,e),e&&o(I),E(A,e),e&&o(z),E(S,e),e&&o(U),E(_,e),e&&o(D),E(K,e)}}}function ue(e){let t,n;return t=new S({props:{$$slots:{default:[le]},$$scope:{ctx:e}}}),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){x(t,e,a),n=!0},p(e,n){const a={};118636&n[0]|2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(T(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function me(e){let t,n;return t=new I({props:{$$slots:{default:[ue]},$$scope:{ctx:e}}}),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){x(t,e,a),n=!0},p(e,n){const a={};118636&n[0]|2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(T(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function pe(e){let t,n,$;return n=new V({}),{c(){t=a("div"),g(n.$$.fragment),this.h()},l(e){t=s(e,"DIV",{class:!0});var a=r(t);v(n.$$.fragment,a),a.forEach(o),this.h()},h(){i(t,"class","right svelte-pb9zr2")},m(e,a){k(e,t,a),x(n,t,null),$=!0},i(e){$||(T(n.$$.fragment,e),$=!0)},o(e){j(n.$$.fragment,e),$=!1},d(e){e&&o(t),E(n)}}}function de(e){let t,n,$,c,i,l,u,m=e[17]&&pe(),p=[e[41]],d={};for(let a=0;a<p.length;a+=1)d=U(d,p[a]);return{c(){t=a("div"),n=a("p"),$=_("Edit"),c=h(),m&&m.c(),this.h()},l(e){t=s(e,"DIV",{});var a=r(t);n=s(a,"P",{});var i=r(n);$=R(i,"Edit"),i.forEach(o),c=w(a),m&&m.l(a),a.forEach(o),this.h()},h(){D(t,d),K(t,"svelte-pb9zr2",!0)},m(a,s){k(a,t,s),f(t,n),f(n,$),f(t,c),m&&m.m(t,null),i=!0,l||(u=b(t,"click",e[19]),l=!0)},p(e,n){e[17]?m?131072&n[0]&&T(m,1):(m=pe(),m.c(),T(m,1),m.m(t,null)):m&&(P(),j(m,1,1,(()=>{m=null})),z()),D(t,d=L(p,[1024&n[1]&&e[41]])),K(t,"svelte-pb9zr2",!0)},i(e){i||(T(m),i=!0)},o(e){j(m),i=!1},d(e){e&&o(t),m&&m.d(),l=!1,u()}}}function ge(e){let t,n;return t=new G({props:{as:!0,$$slots:{default:[de,({props:e})=>({41:e}),({props:e})=>[0,e?1024:0]]},$$scope:{ctx:e}}}),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){x(t,e,a),n=!0},p(e,n){const a={};131072&n[0]|3072&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(T(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function he(e){let t,n;return t=new I({props:{$$slots:{default:[ge]},$$scope:{ctx:e}}}),{c(){g(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,a){x(t,e,a),n=!0},p(e,n){const a={};131072&n[0]|2048&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(T(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){E(t,e)}}}function ve(e){let t,n,a,$,s,r,c,i,f,l,u,I,A,P,z,C,S,G;function F(t){e[23](t)}t=new ee({props:{config:e[1]}});let N={$$slots:{default:[re]},$$scope:{ctx:e}};function U(t){e[25](t)}void 0!==e[7]&&(N.image=e[7]),a=new Y({props:N}),m.push((()=>p(a,"image",F))),r=new d({props:{noGutter:!0,$$slots:{default:[ce]},$$scope:{ctx:e}}});let _={};return void 0!==e[13]&&(_.tags=e[13]),i=new J({props:_}),m.push((()=>p(i,"tags",U))),u=new d({props:{$$slots:{default:[fe]},$$scope:{ctx:e}}}),A=new d({props:{noGutter:!0,$$slots:{default:[me]},$$scope:{ctx:e}}}),z=new d({props:{noGutter:!0,$$slots:{default:[he]},$$scope:{ctx:e}}}),{c(){g(t.$$.fragment),n=h(),g(a.$$.fragment),s=h(),g(r.$$.fragment),c=h(),g(i.$$.fragment),l=h(),g(u.$$.fragment),I=h(),g(A.$$.fragment),P=h(),g(z.$$.fragment)},l(e){v(t.$$.fragment,e),n=w(e),v(a.$$.fragment,e),s=w(e),v(r.$$.fragment,e),c=w(e),v(i.$$.fragment,e),l=w(e),v(u.$$.fragment,e),I=w(e),v(A.$$.fragment,e),P=w(e),v(z.$$.fragment,e)},m($,o){x(t,$,o),k($,n,o),x(a,$,o),k($,s,o),x(r,$,o),k($,c,o),x(i,$,o),k($,l,o),x(u,$,o),k($,I,o),x(A,$,o),k($,P,o),x(z,$,o),C=!0,S||(G=b(window,"keydown",e[18]),S=!0)},p(e,n){const s={};2&n[0]&&(s.config=e[1]),t.$set(s);const o={};3&n[0]|2048&n[1]&&(o.$$scope={dirty:n,ctx:e}),!$&&128&n[0]&&($=!0,o.image=e[7],y((()=>$=!1))),a.$set(o);const c={};16&n[0]|2048&n[1]&&(c.$$scope={dirty:n,ctx:e}),r.$set(c);const l={};!f&&8192&n[0]&&(f=!0,l.tags=e[13],y((()=>f=!1))),i.$set(l);const m={};4096&n[0]|2048&n[1]&&(m.$$scope={dirty:n,ctx:e}),u.$set(m);const p={};118636&n[0]|2048&n[1]&&(p.$$scope={dirty:n,ctx:e}),A.$set(p);const d={};131072&n[0]|2048&n[1]&&(d.$$scope={dirty:n,ctx:e}),z.$set(d)},i(e){C||(T(t.$$.fragment,e),T(a.$$.fragment,e),T(r.$$.fragment,e),T(i.$$.fragment,e),T(u.$$.fragment,e),T(A.$$.fragment,e),T(z.$$.fragment,e),C=!0)},o(e){j(t.$$.fragment,e),j(a.$$.fragment,e),j(r.$$.fragment,e),j(i.$$.fragment,e),j(u.$$.fragment,e),j(A.$$.fragment,e),j(z.$$.fragment,e),C=!1},d(e){E(t,e),e&&o(n),E(a,e),e&&o(s),E(r,e),e&&o(c),E(i,e),e&&o(l),E(u,e),e&&o(I),E(A,e),e&&o(P),E(z,e),S=!1,G()}}}async function we({session:e}){let t=e.token;if(!t)return{status:302,redirect:"/login"};let n=await q("user",t);return n?{props:{user:n}}:{status:302,redirect:"/login"}}let xe='Add a url scheme to the link, something like "http://, at the beginning';function ke(e,t,n){let a,$,s,r,{user:o={}}=t,c={key:{}.PAYSTACK,email:o.email,metadata:{id:o.id},amount:190233,currency:"NGN",embed:!1,value:"Pay"},i=o.show_email,f=o.username,l=o.hidden,u=o.address,m=o.website,p=o.image,d=o.email,g=o.phone,h=o.about,v=o.token,w=o.data,x=o.name,k=o.fields||[],b=o.tags||[];const y=async()=>{if(n(17,r=!0),m&&!Q.test(m))return n(16,s=!0),void(editLoading=!1);if(!d)return void n(17,r=!1);if(!W(d))return void n(17,r=!1);if(!f)return n(14,a=!0),n(15,$="Empty"),void n(17,r=!1);if(f!==o.username&&await q(`check_username/${f}`).then((e=>!e.res)))return n(14,a=!0),n(15,$="Username taken"),void n(17,r=!1);if(W(f))return n(14,a=!0),n(15,$="Unaccepted"),void n(17,r=!1);let e={show_email:i,username:f,hidden:l,website:m,address:u,email:d,phone:g,about:h,image:p,data:w,tags:b,name:x},t=await B("users",e,v).finally((e=>(n(17,r=!1),e)));t.id&&H(`/${t.username}`)};return e.$$set=e=>{"user"in e&&n(0,o=e.user)},[o,c,i,f,l,u,m,p,d,g,h,x,k,b,a,$,s,r,e=>{switch(e.keyCode){case 13:e.ctrlKey&&y()}},y,()=>{n(1,c.open=!0,c)},()=>{n(1,c.open=!0,c),n(1,c.amount=3e3,c),n(1,c.metadata.purpose="change_card",c)},()=>{n(1,c.open=!0,c)},function(e){p=e,n(7,p)},function(e){l=e,n(4,l)},function(e){b=e,n(13,b)},function(e){k=e,n(12,k)},function(e){$=e,n(15,$)},function(e){a=e,n(14,a)},function(e){f=e,n(3,f)},function(e){i=e,n(2,i)},function(e){d=e,n(8,d)},function(e){x=e,n(11,x)},function(e){g=e,n(9,g)},function(e){u=e,n(5,u)},function(e){m=e,n(6,m)},function(e){h=e,n(10,h)}]}class be extends e{constructor(e){super(),t(this,e,ke,ve,n,{user:0},null,[-1,-1])}}export{be as default,we as load};
