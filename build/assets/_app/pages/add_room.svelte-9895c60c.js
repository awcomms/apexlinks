import{S as x,i as ee,s as te,j as g,m as d,o as b,G as T,x as m,u as $,v as h,a1 as U,k as j,a5 as ne,d as k,n as I,f as E,w as B,I as F,E as A,F as N,a2 as q,r as G,ak as se,al as re,K as ae,l as C,am as ue,B as oe,e as R,t as fe,c as D,a as K,g as le,af as L,a4 as S,O as ie,p as ce,U as pe}from"../chunks/vendor-cce9f310.js";import{I as O}from"../chunks/Input-93bd4be1.js";import{T as me}from"../chunks/Tag-6147c832.js";import{d as P,c as V,o as _e}from"../chunks/stores-befe408a.js";import{g as $e}from"../chunks/navigation-51f4a605.js";import{a as z}from"../chunks/api-5c0c9630.js";import"../chunks/singletons-12a22614.js";import"../chunks/post-5b27026c.js";function H(u){let e,n,t;function r(i){u[10](i)}let o={};return u[7]!==void 0&&(o.tags=u[7]),e=new me({props:o}),A.push(()=>N(e,"tags",r)),{c(){g(e.$$.fragment)},l(i){d(e.$$.fragment,i)},m(i,f){b(e,i,f),t=!0},p(i,f){const s={};!n&&f&128&&(n=!0,s.tags=i[7],T(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){$(e.$$.fragment,i),t=!1},d(i){h(e,i)}}}function J(u){let e,n,t,r;function o(s){u[13](s)}function i(s){u[14](s)}let f={invalidText:u[4],labelText:"User"};return u[2]!==void 0&&(f.invalid=u[2]),u[0]!==void 0&&(f.value=u[0]),e=new O({props:f}),A.push(()=>N(e,"invalid",o)),A.push(()=>N(e,"value",i)),{c(){g(e.$$.fragment)},l(s){d(e.$$.fragment,s)},m(s,c){b(e,s,c),r=!0},p(s,c){const l={};c&16&&(l.invalidText=s[4]),!n&&c&4&&(n=!0,l.invalid=s[2],T(()=>n=!1)),!t&&c&1&&(t=!0,l.value=s[0],T(()=>t=!1)),e.$set(l)},i(s){r||(m(e.$$.fragment,s),r=!0)},o(s){$(e.$$.fragment,s),r=!1},d(s){h(e,s)}}}function ge(u){let e,n,t,r,o,i;function f(a){u[11](a)}function s(a){u[12](a)}let c={invalidText:u[3],labelText:"Name"};u[1]!==void 0&&(c.invalid=u[1]),u[6]!==void 0&&(c.value=u[6]),e=new O({props:c}),A.push(()=>N(e,"invalid",f)),A.push(()=>N(e,"value",s));let l=!u[8]&&J(u);return{c(){g(e.$$.fragment),r=j(),l&&l.c(),o=C()},l(a){d(e.$$.fragment,a),r=I(a),l&&l.l(a),o=C()},m(a,p){b(e,a,p),E(a,r,p),l&&l.m(a,p),E(a,o,p),i=!0},p(a,p){const v={};p&8&&(v.invalidText=a[3]),!n&&p&2&&(n=!0,v.invalid=a[1],T(()=>n=!1)),!t&&p&64&&(t=!0,v.value=a[6],T(()=>t=!1)),e.$set(v),a[8]?l&&(G(),$(l,1,1,()=>{l=null}),B()):l?(l.p(a,p),p&256&&m(l,1)):(l=J(a),l.c(),m(l,1),l.m(o.parentNode,o))},i(a){i||(m(e.$$.fragment,a),m(l),i=!0)},o(a){$(e.$$.fragment,a),$(l),i=!1},d(a){h(e,a),a&&k(r),l&&l.d(a),a&&k(o)}}}function de(u){let e,n;return e=new se({props:{$$slots:{default:[ge]},$$scope:{ctx:u}}}),{c(){g(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&262495&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function be(u){let e,n;return e=new q({props:{$$slots:{default:[de]},$$scope:{ctx:u}}}),{c(){g(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&262495&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function M(u){let e,n;return e=new pe({}),{c(){g(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,r){b(e,t,r),n=!0},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function he(u){let e,n,t,r,o,i,f,s=u[5]&&M(),c=[u[17]],l={};for(let a=0;a<c.length;a+=1)l=oe(l,c[a]);return{c(){e=R("div"),n=R("p"),t=fe("Add"),r=j(),s&&s.c(),this.h()},l(a){e=D(a,"DIV",{});var p=K(e);n=D(p,"P",{});var v=K(n);t=le(v,"Add"),v.forEach(k),r=I(p),s&&s.l(p),p.forEach(k),this.h()},h(){L(e,l)},m(a,p){E(a,e,p),S(e,n),S(n,t),S(e,r),s&&s.m(e,null),o=!0,i||(f=ie(e,"click",u[9]),i=!0)},p(a,p){a[5]?s?p&32&&m(s,1):(s=M(),s.c(),m(s,1),s.m(e,null)):s&&(G(),$(s,1,1,()=>{s=null}),B()),L(e,l=ce(c,[p&131072&&a[17]]))},i(a){o||(m(s),o=!0)},o(a){$(s),o=!1},d(a){a&&k(e),s&&s.d(),i=!1,f()}}}function ve(u){let e,n;return e=new ue({props:{as:!0,$$slots:{default:[he,({props:t})=>({17:t}),({props:t})=>t?131072:0]},$$scope:{ctx:u}}}),{c(){g(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&393248&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function ke(u){let e,n;return e=new re({props:{stacked:!0,$$slots:{default:[ve]},$$scope:{ctx:u}}}),{c(){g(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&262176&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function we(u){let e,n;return e=new q({props:{$$slots:{default:[ke]},$$scope:{ctx:u}}}),{c(){g(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&262176&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){$(e.$$.fragment,t),n=!1},d(t){h(e,t)}}}function Ee(u){let e,n,t,r,o,i,f=u[8]&&H(u);return t=new U({props:{noGutter:!0,$$slots:{default:[be]},$$scope:{ctx:u}}}),o=new U({props:{noGutter:!0,$$slots:{default:[we]},$$scope:{ctx:u}}}),{c(){e=j(),f&&f.c(),n=j(),g(t.$$.fragment),r=j(),g(o.$$.fragment),this.h()},l(s){ne('[data-svelte="svelte-1mx7c7r"]',document.head).forEach(k),e=I(s),f&&f.l(s),n=I(s),d(t.$$.fragment,s),r=I(s),d(o.$$.fragment,s),this.h()},h(){document.title="Add Room"},m(s,c){E(s,e,c),f&&f.m(s,c),E(s,n,c),b(t,s,c),E(s,r,c),b(o,s,c),i=!0},p(s,[c]){s[8]?f?(f.p(s,c),c&256&&m(f,1)):(f=H(s),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(G(),$(f,1,1,()=>{f=null}),B());const l={};c&262495&&(l.$$scope={dirty:c,ctx:s}),t.$set(l);const a={};c&262176&&(a.$$scope={dirty:c,ctx:s}),o.$set(a)},i(s){i||(m(f),m(t.$$.fragment,s),m(o.$$.fragment,s),i=!0)},o(s){$(f),$(t.$$.fragment,s),$(o.$$.fragment,s),i=!1},d(s){s&&k(e),f&&f.d(s),s&&k(n),h(t,s),s&&k(r),h(o,s)}}}async function Ue({session:u}){let e=u.user;return e?{props:{user:e}}:{status:302,redirect:"/login"}}function Te(u,e,n){let t,r,o;F(u,V,_=>n(15,t=_)),F(u,P,_=>n(0,r=_)),F(u,_e,_=>n(8,o=_));let i,f,s,c,l,a,p;const v=async()=>{if(r=="")return;(await z.get(`users/${r}`)||{}).id?n(2,f=!1):(n(2,f=!0),n(4,c="Not found"))},Q=async function(){if(n(5,l=!0),!a){n(1,i=!0),n(3,s="Empty"),n(5,l=!1);return}if(!r){n(2,f=!0),n(4,c="Empty"),n(5,l=!1);return}let _={username:r,name:a,tags:p},w=await z.post("rooms",_);w.nameError?(n(3,s=w.nameError),n(1,i=!0),n(5,l=!1)):w.userError?(n(4,c=w.userError),n(2,f=!0),n(5,l=!1)):w.id&&(ae(V,t=a,t),n(5,l=!1),$e(`/room/${w.id}`))};function W(_){p=_,n(7,p)}function X(_){i=_,n(1,i)}function Y(_){a=_,n(6,a)}function Z(_){f=_,n(2,f)}function y(_){r=_,P.set(r)}return u.$$.update=()=>{u.$$.dirty&1&&process.browser&&r&&setTimeout(v,123)},[r,i,f,s,c,l,a,p,o,Q,W,X,Y,Z,y]}class qe extends x{constructor(e){super();ee(this,e,Te,Ee,te,{})}}export{qe as default,Ue as load};
