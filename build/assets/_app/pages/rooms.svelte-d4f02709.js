import{S as t,i as e,s,E as n,F as a,e as r,k as o,j as c,c as l,n as $,m as f,f as i,o as u,x as m,u as p,d as g,v as h,l as d,ab as k,G as y,w as x,ac as v,I as j,a5 as w,a6 as b,r as E,t as T,a as A,g as G,a8 as N,b as B,aj as O,O as P,ap as S,h as q}from"../chunks/vendor-c7b4d8a9.js";import{g as F,p as I}from"../chunks/api-eadfccdc.js";import{T as J}from"../chunks/Tag-6c3f4b89.js";import{g as R}from"../chunks/navigation-51f4a605.js";import{r as z}from"../chunks/stores-fc5807c6.js";import"../chunks/singletons-12a22614.js";function C(t,e,s){const n=t.slice();return n[8]=e[s],n}function D(t){let e,s,n,a,o=t[8].name+"";return{c(){e=r("p"),s=T(o),this.h()},l(t){e=l(t,"P",{class:!0,href:!0});var n=A(e);s=G(n,o),n.forEach(g),this.h()},h(){B(e,"class","item svelte-dveft3"),B(e,"href",""),O(e,"unseen",t[8].unseen)},m(r,o){i(r,e,o),N(e,s),n||(a=P(e,"click",(function(){S(t[4](t[8]))&&t[4](t[8]).apply(this,arguments)})),n=!0)},p(n,a){t=n,1&a&&o!==(o=t[8].name+"")&&q(s,o),1&a&&O(e,"unseen",t[8].unseen)},d(t){t&&g(e),n=!1,a()}}}function H(t){let e,s;return e=new b({props:{$$slots:{default:[D]},$$scope:{ctx:t}}}),{c(){c(e.$$.fragment)},l(t){f(e.$$.fragment,t)},m(t,n){u(e,t,n),s=!0},p(t,s){const n={};2049&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function K(t){let e,s,n,a;return n=new w({props:{noGutter:!0,$$slots:{default:[H]},$$scope:{ctx:t}}}),{c(){e=r("br"),s=o(),c(n.$$.fragment)},l(t){e=l(t,"BR",{}),s=$(t),f(n.$$.fragment,t)},m(t,r){i(t,e,r),i(t,s,r),u(n,t,r),a=!0},p(t,e){const s={};2049&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){a||(m(n.$$.fragment,t),a=!0)},o(t){p(n.$$.fragment,t),a=!1},d(t){t&&g(e),t&&g(s),h(n,t)}}}function L(t){let e,s;return e=new w({props:{noGutter:!0,$$slots:{default:[Q]},$$scope:{ctx:t}}}),{c(){c(e.$$.fragment)},l(t){f(e.$$.fragment,t)},m(t,n){u(e,t,n),s=!0},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function M(t){let e,s;return{c(){e=r("p"),s=T("There don't seem to be any results")},l(t){e=l(t,"P",{});var n=A(e);s=G(n,"There don't seem to be any results"),n.forEach(g)},m(t,n){i(t,e,n),N(e,s)},d(t){t&&g(e)}}}function Q(t){let e,s;return e=new b({props:{$$slots:{default:[M]},$$scope:{ctx:t}}}),{c(){c(e.$$.fragment)},l(t){f(e.$$.fragment,t)},m(t,n){u(e,t,n),s=!0},p(t,s){const n={};2048&s&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){s||(m(e.$$.fragment,t),s=!0)},o(t){p(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function U(t){let e,s,r,l,j,w,b;function T(e){t[7](e)}let A={};void 0!==t[3]&&(A.tags=t[3]),s=new J({props:A}),n.push((()=>a(s,"tags",T))),s.$on("change",t[5]);let G=t[0],N=[];for(let n=0;n<G.length;n+=1)N[n]=K(C(t,G,n));const B=t=>p(N[t],1,1,(()=>{N[t]=null}));let O=t[2]&&t[1]<1&&L(t);return{c(){e=o(),c(s.$$.fragment),l=o();for(let t=0;t<N.length;t+=1)N[t].c();j=o(),O&&O.c(),w=d(),this.h()},l(t){k('[data-svelte="svelte-fq7das"]',document.head).forEach(g),e=$(t),f(s.$$.fragment,t),l=$(t);for(let e=0;e<N.length;e+=1)N[e].l(t);j=$(t),O&&O.l(t),w=d(),this.h()},h(){document.title="Apexlinks"},m(t,n){i(t,e,n),u(s,t,n),i(t,l,n);for(let e=0;e<N.length;e+=1)N[e].m(t,n);i(t,j,n),O&&O.m(t,n),i(t,w,n),b=!0},p(t,[e]){const n={};if(!r&&8&e&&(r=!0,n.tags=t[3],y((()=>r=!1))),s.$set(n),17&e){let s;for(G=t[0],s=0;s<G.length;s+=1){const n=C(t,G,s);N[s]?(N[s].p(n,e),m(N[s],1)):(N[s]=K(n),N[s].c(),m(N[s],1),N[s].m(j.parentNode,j))}for(E(),s=G.length;s<N.length;s+=1)B(s);x()}t[2]&&t[1]<1?O?6&e&&m(O,1):(O=L(t),O.c(),m(O,1),O.m(w.parentNode,w)):O&&(E(),p(O,1,1,(()=>{O=null})),x())},i(t){if(!b){m(s.$$.fragment,t);for(let t=0;t<G.length;t+=1)m(N[t]);m(O),b=!0}},o(t){p(s.$$.fragment,t),N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)p(N[e]);p(O),b=!1},d(t){t&&g(e),h(s,t),t&&g(l),v(N,t),t&&g(j),O&&O.d(t),t&&g(w)}}}async function V({session:t}){let e=t.token;return e?{status:302,redirect:"/login"}:{props:{user:await F("user",e)}}}function W(t,e,s){let n;j(t,z,(t=>s(3,n=t)));let a,{user:r}=e,o=[],c=0;return t.$$set=t=>{"user"in t&&s(6,r=t.user)},[o,c,a,n,async t=>{await I("join",{id:t.id},r.token),R(`/room/${t.id}`)},async function(){let t=`rooms?tags=${JSON.stringify(n)}&page=1`,e=await F(t,r.token);Array.isArray(e.items)&&s(0,o=e.items),s(1,c=e.total),s(2,a=!0)},r,function(t){n=t,z.set(n)}]}class X extends t{constructor(t){super(),e(this,t,W,U,s,{user:6})}}export{X as default,V as load};
