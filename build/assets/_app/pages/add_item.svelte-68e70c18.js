import{S as t,i as e,s as n,E as s,F as a,a5 as $,k as r,j as o,ab as c,d as i,n as f,m,f as l,o as u,O as p,G as d,x as g,u as h,v,I as k,a6 as x,aC as w,aD as y,aE as j,l as b,r as T,w as I,aq as A,aA as E,aF as N,t as D,g as G}from"../chunks/vendor-c7b4d8a9.js";import{i as C}from"../chunks/utils-80e4c2bc.js";import{I as F}from"../chunks/Image-64a8c94e.js";import{T as L}from"../chunks/Tag-6c3f4b89.js";import{I as q}from"../chunks/Input-8c5d8c16.js";import{g as K}from"../chunks/navigation-51f4a605.js";import{s as M}from"../chunks/stores-dacb6c87.js";import{g as O,a as S}from"../chunks/api-eadfccdc.js";import"../chunks/singletons-12a22614.js";function z(t){let e,n,$;function r(e){t[16](e)}let c={labelText:"Link"};return void 0!==t[1]&&(c.value=t[1]),e=new E({props:c}),s.push((()=>a(e,"value",r))),{c(){o(e.$$.fragment)},l(t){m(e.$$.fragment,t)},m(t,n){u(e,t,n),$=!0},p(t,s){const a={};!n&&2&s&&(n=!0,a.value=t[1],d((()=>n=!1))),e.$set(a)},i(t){$||(g(e.$$.fragment,t),$=!0)},o(t){h(e.$$.fragment,t),$=!1},d(t){v(e,t)}}}function B(t){let e,n,$;function r(e){t[17](e)}let c={placeholder:"Description(Markdown)",labelText:"Description(markdown)"};return void 0!==t[3]&&(c.value=t[3]),e=new N({props:c}),s.push((()=>a(e,"value",r))),{c(){o(e.$$.fragment)},l(t){m(e.$$.fragment,t)},m(t,n){u(e,t,n),$=!0},p(t,s){const a={};!n&&8&s&&(n=!0,a.value=t[3],d((()=>n=!1))),e.$set(a)},i(t){$||(g(e.$$.fragment,t),$=!0)},o(t){h(e.$$.fragment,t),$=!1},d(t){v(e,t)}}}function H(t){let e,n,$,c,p,k,x,w,y,A;function E(e){t[13](e)}function N(e){t[14](e)}let D={invalidText:"Name taken",labelText:"Name"};function G(e){t[15](e)}void 0!==t[0]&&(D.invalid=t[0]),void 0!==t[2]&&(D.value=t[2]),e=new q({props:D}),s.push((()=>a(e,"invalid",E))),s.push((()=>a(e,"value",N)));let C={labelText:"Let the item's listing redirect to a link"};void 0!==t[4]&&(C.checked=t[4]),p=new j({props:C}),s.push((()=>a(p,"checked",G)));let F=t[4]&&z(t),L=!t[4]&&B(t);return{c(){o(e.$$.fragment),c=r(),o(p.$$.fragment),x=r(),F&&F.c(),w=r(),L&&L.c(),y=b()},l(t){m(e.$$.fragment,t),c=f(t),m(p.$$.fragment,t),x=f(t),F&&F.l(t),w=f(t),L&&L.l(t),y=b()},m(t,n){u(e,t,n),l(t,c,n),u(p,t,n),l(t,x,n),F&&F.m(t,n),l(t,w,n),L&&L.m(t,n),l(t,y,n),A=!0},p(t,s){const a={};!n&&1&s&&(n=!0,a.invalid=t[0],d((()=>n=!1))),!$&&4&s&&($=!0,a.value=t[2],d((()=>$=!1))),e.$set(a);const r={};!k&&16&s&&(k=!0,r.checked=t[4],d((()=>k=!1))),p.$set(r),t[4]?F?(F.p(t,s),16&s&&g(F,1)):(F=z(t),F.c(),g(F,1),F.m(w.parentNode,w)):F&&(T(),h(F,1,1,(()=>{F=null})),I()),t[4]?L&&(T(),h(L,1,1,(()=>{L=null})),I()):L?(L.p(t,s),16&s&&g(L,1)):(L=B(t),L.c(),g(L,1),L.m(y.parentNode,y))},i(t){A||(g(e.$$.fragment,t),g(p.$$.fragment,t),g(F),g(L),A=!0)},o(t){h(e.$$.fragment,t),h(p.$$.fragment,t),h(F),h(L),A=!1},d(t){v(e,t),t&&i(c),v(p,t),t&&i(x),F&&F.d(t),t&&i(w),L&&L.d(t),t&&i(y)}}}function J(t){let e,n;return e=new w({props:{$$slots:{default:[H]},$$scope:{ctx:t}}}),{c(){o(e.$$.fragment)},l(t){m(e.$$.fragment,t)},m(t,s){u(e,t,s),n=!0},p(t,n){const s={};2097183&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function P(t){let e,n;return e=new x({props:{$$slots:{default:[J]},$$scope:{ctx:t}}}),{c(){o(e.$$.fragment)},l(t){m(e.$$.fragment,t)},m(t,s){u(e,t,s),n=!0},p(t,n){const s={};2097183&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Q(t){let e;return{c(){e=D("Add")},l(t){e=G(t,"Add")},m(t,n){l(t,e,n)},d(t){t&&i(e)}}}function R(t){let e,n;return e=new A({props:{$$slots:{default:[Q]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){o(e.$$.fragment)},l(t){m(e.$$.fragment,t)},m(t,s){u(e,t,s),n=!0},p(t,n){const s={};2097152&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function U(t){let e,n;return e=new y({props:{stacked:!0,$$slots:{default:[R]},$$scope:{ctx:t}}}),{c(){o(e.$$.fragment)},l(t){m(e.$$.fragment,t)},m(t,s){u(e,t,s),n=!0},p(t,n){const s={};2097152&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function V(t){let e,n;return e=new x({props:{$$slots:{default:[U]},$$scope:{ctx:t}}}),{c(){o(e.$$.fragment)},l(t){m(e.$$.fragment,t)},m(t,s){u(e,t,s),n=!0},p(t,n){const s={};2097152&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function W(t){let e,n,k,x,w,y,j,b,T,I,A,E,N;function D(e){t[11](e)}let G={};function C(e){t[12](e)}void 0!==t[6]&&(G.image=t[6]),n=new F({props:G}),s.push((()=>a(n,"image",D)));let q={};return void 0!==t[5]&&(q.tags=t[5]),w=new L({props:q}),s.push((()=>a(w,"tags",C))),b=new $({props:{noGutter:!0,$$slots:{default:[P]},$$scope:{ctx:t}}}),I=new $({props:{noGutter:!0,$$slots:{default:[V]},$$scope:{ctx:t}}}),{c(){e=r(),o(n.$$.fragment),x=r(),o(w.$$.fragment),j=r(),o(b.$$.fragment),T=r(),o(I.$$.fragment),this.h()},l(t){c('[data-svelte="svelte-7tntdn"]',document.head).forEach(i),e=f(t),m(n.$$.fragment,t),x=f(t),m(w.$$.fragment,t),j=f(t),m(b.$$.fragment,t),T=f(t),m(I.$$.fragment,t),this.h()},h(){document.title="Add Item"},m(s,a){l(s,e,a),u(n,s,a),l(s,x,a),u(w,s,a),l(s,j,a),u(b,s,a),l(s,T,a),u(I,s,a),A=!0,E||(N=p(window,"keydown",t[7]),E=!0)},p(t,[e]){const s={};!k&&64&e&&(k=!0,s.image=t[6],d((()=>k=!1))),n.$set(s);const a={};!y&&32&e&&(y=!0,a.tags=t[5],d((()=>y=!1))),w.$set(a);const $={};2097183&e&&($.$$scope={dirty:e,ctx:t}),b.$set($);const r={};2097152&e&&(r.$$scope={dirty:e,ctx:t}),I.$set(r)},i(t){A||(g(n.$$.fragment,t),g(w.$$.fragment,t),g(b.$$.fragment,t),g(I.$$.fragment,t),A=!0)},o(t){h(n.$$.fragment,t),h(w.$$.fragment,t),h(b.$$.fragment,t),h(I.$$.fragment,t),A=!1},d(t){t&&i(e),v(n,t),t&&i(x),v(w,t),t&&i(j),v(b,t),t&&i(T),v(I,t),E=!1,N()}}}async function X({session:t}){let e=await O("user",t.token);return console.log(e),e?{props:{user:e}}:{status:302,redirect:"login"}}function Y(t,e,n){let s;k(t,M,(t=>n(19,s=t)));let a,$,r,o,c,i,f,{user:m={}}=e,l=[];const u=async()=>{let t={tags:l,name:r,image:f,price:undefined,itype:c,itext:o},e=await S("items",t,s.token).finally((t=>t));e.nameError&&n(0,a=!0),e.id&&K(`/item/${e.id}`)};return t.$$set=t=>{"user"in t&&n(9,m=t.user)},t.$$.update=()=>{1024&t.$$.dirty&&n(10,c=C(c))},[a,$,r,o,i,l,f,t=>{switch(t.keyCode){case 13:t.ctrlKey&&u()}},u,m,c,function(t){f=t,n(6,f)},function(t){l=t,n(5,l)},function(t){a=t,n(0,a)},function(t){r=t,n(2,r)},function(t){i=t,n(4,i)},function(t){$=t,n(1,$)},function(t){o=t,n(3,o)}]}class Z extends t{constructor(t){super(),e(this,t,Y,W,n,{user:9})}}export{Z as default,X as load};
