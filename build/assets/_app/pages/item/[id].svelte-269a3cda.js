import{S as t,i as e,s as r,a3 as s,j as n,m as a,o as l,v as c,r as $,w as o,k as i,e as m,l as f,n as u,c as d,f as p,u as g,d as h,a4 as x,B as v,b as y,t as w,a as k,g as b,a6 as E,h as N,a5 as j,aa as P}from"../../chunks/vendor-221a53e8.js";import{g as A}from"../../chunks/api-464cac91.js";import{b as I}from"../../chunks/utils-6d6449a6.js";function M(t,e,r){const s=t.slice();return s[3]=e[r],s}function S(t){let e,r;return e=new x({props:{lg:2,sm:2,md:2,xlg:2,$$slots:{default:[B]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){l(e,t,s),r=!0},p(t,r){const s={};65&r&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){o(e,t)}}}function B(t){let e,r;return{c(){e=m("img"),this.h()},l(t){e=d(t,"IMG",{width:!0,alt:!0,src:!0}),this.h()},h(){y(e,"width","100%"),y(e,"alt","item display _image"),e.src!==(r=t[0].image)&&y(e,"src",r)},m(t,r){p(t,e,r)},p(t,s){1&s&&e.src!==(r=t[0].image)&&y(e,"src",r)},d(t){t&&h(e)}}}function D(t){let e;function r(t,e){return t[0].redirect&&t[0].link?L:H}let s=r(t),n=s(t);return{c(){n.c(),e=f()},l(t){n.l(t),e=f()},m(t,r){n.m(t,r),p(t,e,r)},p(t,a){s===(s=r(t))&&n?n.p(t,a):(n.d(1),n=s(t),n&&(n.c(),n.m(e.parentNode,e)))},d(t){n.d(t),t&&h(e)}}}function H(t){let e,r,s=t[0].name+"";return{c(){e=m("p"),r=w(s),this.h()},l(t){e=d(t,"P",{class:!0});var n=k(e);r=b(n,s),n.forEach(h),this.h()},h(){y(e,"class","bold svelte-r4t1yu")},m(t,s){p(t,e,s),E(e,r)},p(t,e){1&e&&s!==(s=t[0].name+"")&&N(r,s)},d(t){t&&h(e)}}}function L(t){let e,r,s,n,a=t[0].name+"";return{c(){e=m("p"),r=m("a"),s=w(a),this.h()},l(t){e=d(t,"P",{class:!0});var n=k(e);r=d(n,"A",{class:!0,href:!0});var l=k(r);s=b(l,a),l.forEach(h),n.forEach(h),this.h()},h(){y(r,"class","blank-link svelte-r4t1yu"),y(r,"href",n=t[0].link||""),y(e,"class","bold svelte-r4t1yu")},m(t,n){p(t,e,n),E(e,r),E(r,s)},p(t,e){1&e&&a!==(a=t[0].name+"")&&N(s,a),1&e&&n!==(n=t[0].link||"")&&y(r,"href",n)},d(t){t&&h(e)}}}function T(t){let e,r,s,n,a,l,c,$=t[3].label+"",o=t[3].value+"";return{c(){e=m("div"),r=m("span"),s=w($),n=w(":"),a=i(),l=m("span"),c=w(o),this.h()},l(t){e=d(t,"DIV",{});var i=k(e);r=d(i,"SPAN",{class:!0});var m=k(r);s=b(m,$),n=b(m,":"),m.forEach(h),a=u(i),l=d(i,"SPAN",{});var f=k(l);c=b(f,o),f.forEach(h),i.forEach(h),this.h()},h(){y(r,"class","bold svelte-r4t1yu")},m(t,$){p(t,e,$),E(e,r),E(r,s),E(r,n),E(e,a),E(e,l),E(l,c)},p(t,e){1&e&&$!==($=t[3].label+"")&&N(s,$),1&e&&o!==(o=t[3].value+"")&&N(c,o)},d(t){t&&h(e)}}}function U(t){let e;return{c(){e=w("User")},l(t){e=b(t,"User")},m(t,r){p(t,e,r)},d(t){t&&h(e)}}}function V(t){let e,r;return e=new j({props:{href:"/edit/"+t[0].id,$$slots:{default:[G]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){l(e,t,s),r=!0},p(t,r){const s={};1&r&&(s.href="/edit/"+t[0].id),64&r&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){o(e,t)}}}function G(t){let e;return{c(){e=w("Edit")},l(t){e=b(t,"Edit")},m(t,r){p(t,e,r)},d(t){t&&h(e)}}}function R(t){let e,r,s,m,d,x,y=t[0].name&&D(t),w=t[0].fields,k=[];for(let n=0;n<w.length;n+=1)k[n]=T(M(t,w,n));s=new j({props:{href:"/"+t[0].user,$$slots:{default:[U]},$$scope:{ctx:t}}});let b=t[1]&&t[1].username==t[0].user&&V(t);return{c(){y&&y.c(),e=i();for(let t=0;t<k.length;t+=1)k[t].c();r=i(),n(s.$$.fragment),m=i(),b&&b.c(),d=f()},l(t){y&&y.l(t),e=u(t);for(let e=0;e<k.length;e+=1)k[e].l(t);r=u(t),a(s.$$.fragment,t),m=u(t),b&&b.l(t),d=f()},m(t,n){y&&y.m(t,n),p(t,e,n);for(let e=0;e<k.length;e+=1)k[e].m(t,n);p(t,r,n),l(s,t,n),p(t,m,n),b&&b.m(t,n),p(t,d,n),x=!0},p(t,n){if(t[0].name?y?y.p(t,n):(y=D(t),y.c(),y.m(e.parentNode,e)):y&&(y.d(1),y=null),1&n){let e;for(w=t[0].fields,e=0;e<w.length;e+=1){const s=M(t,w,e);k[e]?k[e].p(s,n):(k[e]=T(s),k[e].c(),k[e].m(r.parentNode,r))}for(;e<k.length;e+=1)k[e].d(1);k.length=w.length}const a={};1&n&&(a.href="/"+t[0].user),64&n&&(a.$$scope={dirty:n,ctx:t}),s.$set(a),t[1]&&t[1].username==t[0].user?b?(b.p(t,n),3&n&&c(b,1)):(b=V(t),b.c(),c(b,1),b.m(d.parentNode,d)):b&&(v(),$(b,1,1,(()=>{b=null})),g())},i(t){x||(c(s.$$.fragment,t),c(b),x=!0)},o(t){$(s.$$.fragment,t),$(b),x=!1},d(t){y&&y.d(t),t&&h(e),P(k,t),t&&h(r),o(s,t),t&&h(m),b&&b.d(t),t&&h(d)}}}function _(t){let e,r,s,m=t[0].image&&S(t);return r=new x({props:{lg:4,sm:4,md:4,xlg:4,$$slots:{default:[R]},$$scope:{ctx:t}}}),{c(){m&&m.c(),e=i(),n(r.$$.fragment)},l(t){m&&m.l(t),e=u(t),a(r.$$.fragment,t)},m(t,n){m&&m.m(t,n),p(t,e,n),l(r,t,n),s=!0},p(t,s){t[0].image?m?(m.p(t,s),1&s&&c(m,1)):(m=S(t),m.c(),c(m,1),m.m(e.parentNode,e)):m&&(v(),$(m,1,1,(()=>{m=null})),g());const n={};67&s&&(n.$$scope={dirty:s,ctx:t}),r.$set(n)},i(t){s||(c(m),c(r.$$.fragment,t),s=!0)},o(t){$(m),$(r.$$.fragment,t),s=!1},d(t){m&&m.d(t),t&&h(e),o(r,t)}}}function q(t){let e,r;return e=new s({props:{$$slots:{default:[C]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){l(e,t,s),r=!0},p(t,r){const s={};68&r&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){o(e,t)}}}function z(t){let e;return{c(){e=m("div")},l(t){e=d(t,"DIV",{}),k(e).forEach(h)},m(r,s){p(r,e,s),e.innerHTML=t[2]},p(t,r){4&r&&(e.innerHTML=t[2])},d(t){t&&h(e)}}}function C(t){let e,r;return e=new x({props:{lg:6,sm:6,md:6,xlg:6,$$slots:{default:[z]},$$scope:{ctx:t}}}),{c(){n(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,s){l(e,t,s),r=!0},p(t,r){const s={};68&r&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){r||(c(e.$$.fragment,t),r=!0)},o(t){$(e.$$.fragment,t),r=!1},d(t){o(e,t)}}}function F(t){let e,r,x,y,w,k;e=new s({props:{$$slots:{default:[_]},$$scope:{ctx:t}}});let b=!t[0].redirect&&t[2]&&q(t);return{c(){n(e.$$.fragment),r=i(),x=m("br"),y=i(),b&&b.c(),w=f()},l(t){a(e.$$.fragment,t),r=u(t),x=d(t,"BR",{}),y=u(t),b&&b.l(t),w=f()},m(t,s){l(e,t,s),p(t,r,s),p(t,x,s),p(t,y,s),b&&b.m(t,s),p(t,w,s),k=!0},p(t,[r]){const s={};67&r&&(s.$$scope={dirty:r,ctx:t}),e.$set(s),!t[0].redirect&&t[2]?b?(b.p(t,r),5&r&&c(b,1)):(b=q(t),b.c(),c(b,1),b.m(w.parentNode,w)):b&&(v(),$(b,1,1,(()=>{b=null})),g())},i(t){k||(c(e.$$.fragment,t),c(b),k=!0)},o(t){$(e.$$.fragment,t),$(b),k=!1},d(t){o(e,t),t&&h(r),t&&h(x),t&&h(y),b&&b.d(t),t&&h(w)}}}async function J({session:t,page:e}){let r,s=t.token;s&&(r=await A("user",s));let{id:n}=e.params,a=await A(`items/${n}`);return a.error?{status:a.status,error:a.error}:{props:{user:r,item:a}}}function K(t,e,r){let s,{user:n}=e,{item:a}=e;return a.fields=a.fields||[],a.itext&&(s=I(a.itext)),t.$$set=t=>{"user"in t&&r(1,n=t.user),"item"in t&&r(0,a=t.item)},[a,n,s]}export default class extends t{constructor(t){super(),e(this,t,K,F,r,{user:1,item:0})}}export{J as load};
