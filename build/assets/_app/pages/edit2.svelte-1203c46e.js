import{S as e,i as t,s as n,E as a,F as $,a3 as s,k as r,j as o,t as c,a9 as i,d as f,n as l,m as u,g as m,f as p,o as d,O as g,G as h,v,r as w,w as x,a4 as b,l as k,B as y,u as T,ay as j,aw as E,an as z,au as I,az as P,e as C,c as G,a as L,b as N,A as S,aj as U,ah as A,a6 as _,p as q,U as D}from"../chunks/vendor-221a53e8.js";import{g as R,p as V}from"../chunks/api-464cac91.js";import{g as B}from"../chunks/navigation-20968cc5.js";import{I as F}from"../chunks/Input-cd25684c.js";import{I as K}from"../chunks/Image-ffc55824.js";import{T as M}from"../chunks/Tag-9a4ea10c.js";import{P as O}from"../chunks/Paystack-be93ea47.js";import{a as H,c as J}from"../chunks/utils-6d6449a6.js";import"../chunks/singletons-bb9012b7.js";function Q(e){let t,n;return t=new z({props:{size:"small",$$slots:{default:[X]},$$scope:{ctx:e}}}),t.$on("click",e[22]),{c(){o(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};1024&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(v(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function W(e){let t,n,a,$;return t=new z({props:{size:"small",$$slots:{default:[Y]},$$scope:{ctx:e}}}),t.$on("click",e[20]),a=new z({props:{size:"small",$$slots:{default:[Z]},$$scope:{ctx:e}}}),a.$on("click",e[21]),{c(){o(t.$$.fragment),n=r(),o(a.$$.fragment)},l(e){u(t.$$.fragment,e),n=l(e),u(a.$$.fragment,e)},m(e,s){d(t,e,s),p(e,n,s),d(a,e,s),$=!0},p(e,n){const $={};1024&n[1]&&($.$$scope={dirty:n,ctx:e}),t.$set($);const s={};1024&n[1]&&(s.$$scope={dirty:n,ctx:e}),a.$set(s)},i(e){$||(v(t.$$.fragment,e),v(a.$$.fragment,e),$=!0)},o(e){w(t.$$.fragment,e),w(a.$$.fragment,e),$=!1},d(e){x(t,e),e&&f(n),x(a,e)}}}function X(e){let t;return{c(){t=c("Subscribe")},l(e){t=m(e,"Subscribe")},m(e,n){p(e,t,n)},d(e){e&&f(t)}}}function Y(e){let t;return{c(){t=c("Renew subscription")},l(e){t=m(e,"Renew subscription")},m(e,n){p(e,t,n)},d(e){e&&f(t)}}}function Z(e){let t;return{c(){t=c("Change card")},l(e){t=m(e,"Change card")},m(e,n){p(e,t,n)},d(e){e&&f(t)}}}function ee(e){let t,n,a,$;const s=[W,Q],r=[];function o(e,t){return e[0].paid?0:1}return t=o(e),n=r[t]=s[t](e),{c(){n.c(),a=k()},l(e){n.l(e),a=k()},m(e,n){r[t].m(e,n),p(e,a,n),$=!0},p(e,$){let c=t;t=o(e),t===c?r[t].p(e,$):(y(),w(r[c],1,1,(()=>{r[c]=null})),T(),n=r[t],n?n.p(e,$):(n=r[t]=s[t](e),n.c()),v(n,1),n.m(a.parentNode,a))},i(e){$||(v(n),$=!0)},o(e){w(n),$=!1},d(e){r[t].d(e),e&&f(a)}}}function te(e){let t,n,s;function r(t){e[24](t)}let c={labelText:"Public"};return void 0!==e[5]&&(c.checked=e[5]),t=new j({props:c}),a.push((()=>$(t,"checked",r))),{c(){o(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,n){d(t,e,n),s=!0},p(e,a){const $={};!n&&32&a[0]&&(n=!0,$.checked=e[5],h((()=>n=!1))),t.$set($)},i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){w(t.$$.fragment,e),s=!1},d(e){x(t,e)}}}function ne(e){let t,n;return t=new b({props:{$$slots:{default:[te]},$$scope:{ctx:e}}}),{c(){o(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};32&n[0]|1024&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(v(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function ae(e){let t,n,s,c,i,m,g,b,k,y,T,E,z,C,G,L,N,S,U,A,_,q,D,R,V,B;function K(t){e[26](t)}function M(t){e[27](t)}function O(t){e[28](t)}let H={labelText:"Username"};function J(t){e[29](t)}void 0!==e[14]&&(H.invalidText=e[14]),void 0!==e[13]&&(H.invalid=e[13]),void 0!==e[1]&&(H.value=e[1]),t=new F({props:H}),a.push((()=>$(t,"invalidText",K))),a.push((()=>$(t,"invalid",M))),a.push((()=>$(t,"value",O)));let Q={labelText:"Show email in profile"};function W(t){e[30](t)}void 0!==e[4]&&(Q.checked=e[4]),m=new j({props:Q}),a.push((()=>$(m,"checked",J)));let X={labelText:"Email"};function Y(t){e[31](t)}void 0!==e[2]&&(X.value=e[2]),k=new I({props:X}),a.push((()=>$(k,"value",W)));let Z={labelText:"Name"};function ee(t){e[32](t)}void 0!==e[11]&&(Z.value=e[11]),E=new I({props:Z}),a.push((()=>$(E,"value",Y)));let te={labelText:"Phone"};function ne(t){e[33](t)}void 0!==e[9]&&(te.value=e[9]),G=new I({props:te}),a.push((()=>$(G,"value",ee)));let ae={labelText:"Address"};function $e(t){e[34](t)}void 0!==e[6]&&(ae.value=e[6]),S=new I({props:ae}),a.push((()=>$(S,"value",ne)));let se={invalid:e[15],invalidText:e[17],labelText:"Link"};function re(t){e[35](t)}void 0!==e[7]&&(se.value=e[7]),_=new F({props:se}),a.push((()=>$(_,"value",$e)));let oe={rows:11,placeholder:"About (Markdown)"};return void 0!==e[10]&&(oe.value=e[10]),R=new P({props:oe}),a.push((()=>$(R,"value",re))),{c(){o(t.$$.fragment),i=r(),o(m.$$.fragment),b=r(),o(k.$$.fragment),T=r(),o(E.$$.fragment),C=r(),o(G.$$.fragment),N=r(),o(S.$$.fragment),A=r(),o(_.$$.fragment),D=r(),o(R.$$.fragment)},l(e){u(t.$$.fragment,e),i=l(e),u(m.$$.fragment,e),b=l(e),u(k.$$.fragment,e),T=l(e),u(E.$$.fragment,e),C=l(e),u(G.$$.fragment,e),N=l(e),u(S.$$.fragment,e),A=l(e),u(_.$$.fragment,e),D=l(e),u(R.$$.fragment,e)},m(e,n){d(t,e,n),p(e,i,n),d(m,e,n),p(e,b,n),d(k,e,n),p(e,T,n),d(E,e,n),p(e,C,n),d(G,e,n),p(e,N,n),d(S,e,n),p(e,A,n),d(_,e,n),p(e,D,n),d(R,e,n),B=!0},p(e,a){const $={};!n&&16384&a[0]&&(n=!0,$.invalidText=e[14],h((()=>n=!1))),!s&&8192&a[0]&&(s=!0,$.invalid=e[13],h((()=>s=!1))),!c&&2&a[0]&&(c=!0,$.value=e[1],h((()=>c=!1))),t.$set($);const r={};!g&&16&a[0]&&(g=!0,r.checked=e[4],h((()=>g=!1))),m.$set(r);const o={};!y&&4&a[0]&&(y=!0,o.value=e[2],h((()=>y=!1))),k.$set(o);const i={};!z&&2048&a[0]&&(z=!0,i.value=e[11],h((()=>z=!1))),E.$set(i);const f={};!L&&512&a[0]&&(L=!0,f.value=e[9],h((()=>L=!1))),G.$set(f);const l={};!U&&64&a[0]&&(U=!0,l.value=e[6],h((()=>U=!1))),S.$set(l);const u={};32768&a[0]&&(u.invalid=e[15]),!q&&128&a[0]&&(q=!0,u.value=e[7],h((()=>q=!1))),_.$set(u);const p={};!V&&1024&a[0]&&(V=!0,p.value=e[10],h((()=>V=!1))),R.$set(p)},i(e){B||(v(t.$$.fragment,e),v(m.$$.fragment,e),v(k.$$.fragment,e),v(E.$$.fragment,e),v(G.$$.fragment,e),v(S.$$.fragment,e),v(_.$$.fragment,e),v(R.$$.fragment,e),B=!0)},o(e){w(t.$$.fragment,e),w(m.$$.fragment,e),w(k.$$.fragment,e),w(E.$$.fragment,e),w(G.$$.fragment,e),w(S.$$.fragment,e),w(_.$$.fragment,e),w(R.$$.fragment,e),B=!1},d(e){x(t,e),e&&f(i),x(m,e),e&&f(b),x(k,e),e&&f(T),x(E,e),e&&f(C),x(G,e),e&&f(N),x(S,e),e&&f(A),x(_,e),e&&f(D),x(R,e)}}}function $e(e){let t,n;return t=new E({props:{$$slots:{default:[ae]},$$scope:{ctx:e}}}),{c(){o(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};61142&n[0]|1024&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(v(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function se(e){let t,n;return t=new b({props:{$$slots:{default:[$e]},$$scope:{ctx:e}}}),{c(){o(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};61142&n[0]|1024&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(v(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function re(e){let t,n,a;return n=new D({}),{c(){t=C("div"),o(n.$$.fragment),this.h()},l(e){t=G(e,"DIV",{class:!0});var a=L(t);u(n.$$.fragment,a),a.forEach(f),this.h()},h(){N(t,"class","right svelte-pb9zr2")},m(e,$){p(e,t,$),d(n,t,null),a=!0},i(e){a||(v(n.$$.fragment,e),a=!0)},o(e){w(n.$$.fragment,e),a=!1},d(e){e&&f(t),x(n)}}}function oe(e){let t,n,a,$,s,o,i,u=e[16]&&re(),d=[e[40]],h={};for(let r=0;r<d.length;r+=1)h=S(h,d[r]);return{c(){t=C("div"),n=C("p"),a=c("Edit"),$=r(),u&&u.c(),this.h()},l(e){t=G(e,"DIV",{});var s=L(t);n=G(s,"P",{});var r=L(n);a=m(r,"Edit"),r.forEach(f),$=l(s),u&&u.l(s),s.forEach(f),this.h()},h(){U(t,h),A(t,"svelte-pb9zr2",!0)},m(r,c){p(r,t,c),_(t,n),_(n,a),_(t,$),u&&u.m(t,null),s=!0,o||(i=g(t,"click",e[19]),o=!0)},p(e,n){e[16]?u?65536&n[0]&&v(u,1):(u=re(),u.c(),v(u,1),u.m(t,null)):u&&(y(),w(u,1,1,(()=>{u=null})),T()),U(t,h=q(d,[512&n[1]&&e[40]])),A(t,"svelte-pb9zr2",!0)},i(e){s||(v(u),s=!0)},o(e){w(u),s=!1},d(e){e&&f(t),u&&u.d(),o=!1,i()}}}function ce(e){let t,n;return t=new z({props:{as:!0,$$slots:{default:[oe,({props:e})=>({40:e}),({props:e})=>[0,e?512:0]]},$$scope:{ctx:e}}}),{c(){o(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};65536&n[0]|1536&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(v(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function ie(e){let t,n;return t=new b({props:{$$slots:{default:[ce]},$$scope:{ctx:e}}}),{c(){o(t.$$.fragment)},l(e){u(t.$$.fragment,e)},m(e,a){d(t,e,a),n=!0},p(e,n){const a={};65536&n[0]|1024&n[1]&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){n||(v(t.$$.fragment,e),n=!0)},o(e){w(t.$$.fragment,e),n=!1},d(e){x(t,e)}}}function fe(e){let t,n,b,k,y,T,j,E,z,I,P,C,G,L,N,S,U,A;function _(t){e[23](t)}n=new O({props:{config:e[3]}});let q={$$slots:{default:[ee]},$$scope:{ctx:e}};function D(t){e[25](t)}void 0!==e[8]&&(q.image=e[8]),k=new K({props:q}),a.push((()=>$(k,"image",_))),j=new s({props:{noGutter:!0,$$slots:{default:[ne]},$$scope:{ctx:e}}});let R={};return void 0!==e[12]&&(R.tags=e[12]),z=new M({props:R}),a.push((()=>$(z,"tags",D))),C=new s({props:{noGutter:!0,$$slots:{default:[se]},$$scope:{ctx:e}}}),L=new s({props:{noGutter:!0,$$slots:{default:[ie]},$$scope:{ctx:e}}}),{c(){t=r(),o(n.$$.fragment),b=r(),o(k.$$.fragment),T=r(),o(j.$$.fragment),E=r(),o(z.$$.fragment),P=r(),o(C.$$.fragment),G=r(),o(L.$$.fragment),N=c("\n\n --\x3e"),this.h()},l(e){i('[data-svelte="svelte-b9qoqp"]',document.head).forEach(f),t=l(e),u(n.$$.fragment,e),b=l(e),u(k.$$.fragment,e),T=l(e),u(j.$$.fragment,e),E=l(e),u(z.$$.fragment,e),P=l(e),u(C.$$.fragment,e),G=l(e),u(L.$$.fragment,e),N=m(e,"\n\n --\x3e"),this.h()},h(){document.title="Edit"},m(a,$){p(a,t,$),d(n,a,$),p(a,b,$),d(k,a,$),p(a,T,$),d(j,a,$),p(a,E,$),d(z,a,$),p(a,P,$),d(C,a,$),p(a,G,$),d(L,a,$),p(a,N,$),S=!0,U||(A=g(window,"keydown",e[18]),U=!0)},p(e,t){const a={};8&t[0]&&(a.config=e[3]),n.$set(a);const $={};9&t[0]|1024&t[1]&&($.$$scope={dirty:t,ctx:e}),!y&&256&t[0]&&(y=!0,$.image=e[8],h((()=>y=!1))),k.$set($);const s={};32&t[0]|1024&t[1]&&(s.$$scope={dirty:t,ctx:e}),j.$set(s);const r={};!I&&4096&t[0]&&(I=!0,r.tags=e[12],h((()=>I=!1))),z.$set(r);const o={};61142&t[0]|1024&t[1]&&(o.$$scope={dirty:t,ctx:e}),C.$set(o);const c={};65536&t[0]|1024&t[1]&&(c.$$scope={dirty:t,ctx:e}),L.$set(c)},i(e){S||(v(n.$$.fragment,e),v(k.$$.fragment,e),v(j.$$.fragment,e),v(z.$$.fragment,e),v(C.$$.fragment,e),v(L.$$.fragment,e),S=!0)},o(e){w(n.$$.fragment,e),w(k.$$.fragment,e),w(j.$$.fragment,e),w(z.$$.fragment,e),w(C.$$.fragment,e),w(L.$$.fragment,e),S=!1},d(e){e&&f(t),x(n,e),e&&f(b),x(k,e),e&&f(T),x(j,e),e&&f(E),x(z,e),e&&f(P),x(C,e),e&&f(G),x(L,e),e&&f(N),U=!1,A()}}}async function le({session:e}){let t=e.token;if(!t)return{status:302,redirect:"/login"};let n=await R("user",t);return n?{props:{user:n}}:{status:302,redirect:"/login"}}function ue(e,t,n){let a,$,s,r,{user:o}=t,c={email:o.email,metadata:{id:o.id},amount:190233,currency:"NGN",embed:!1,value:"Pay"},i=o.show_email,f=o.username,l=o.visible,u=o.address,m=o.website,p=o.image,d=o.email,g=o.phone,h=o.about,v=o.token,w=o.data,x=o.name,b=o.tags||[];const k=async()=>{if(n(16,r=!0),m&&!H.test(m))return n(15,s=!0),void(editLoading=!1);if(!d)return void n(16,r=!1);if(!J(d))return void n(16,r=!1);if(!f)return n(13,a=!0),n(14,$="Empty"),void n(16,r=!1);if(J(f))return n(13,a=!0),n(14,$="Unaccepted"),void n(16,r=!1);let e={show_email:i,username:f,visible:l,website:m,address:u,email:d,phone:g,about:h,image:p,data:w,tags:b,name:x},t=await V("users",e,v).finally((e=>(n(16,r=!1),e)));t.id&&B(`/${t.username}`)};return e.$$set=e=>{"user"in e&&n(0,o=e.user)},e.$$.update=()=>{2&e.$$.dirty[0]&&f&&n(1,f=f.toLowerCase()),2&e.$$.dirty[0]&&checkUsername(f),4&e.$$.dirty[0]&&d&&n(2,d=d.toLowerCase())},[o,f,d,c,i,l,u,m,p,g,h,x,b,a,$,s,r,undefined,e=>{switch(e.keyCode){case 13:e.ctrlKey&&k()}},k,()=>{n(3,c.open=!0,c)},()=>{n(3,c.open=!0,c),n(3,c.amount=3e3,c),n(3,c.metadata.purpose="change_card",c)},()=>{n(3,c.open=!0,c)},function(e){p=e,n(8,p)},function(e){l=e,n(5,l)},function(e){b=e,n(12,b)},function(e){$=e,n(14,$)},function(e){a=e,n(13,a)},function(e){f=e,n(1,f)},function(e){i=e,n(4,i)},function(e){d=e,n(2,d)},function(e){x=e,n(11,x)},function(e){g=e,n(9,g)},function(e){u=e,n(6,u)},function(e){m=e,n(7,m)},function(e){h=e,n(10,h)}]}export default class extends e{constructor(e){super(),t(this,e,ue,fe,n,{user:0},[-1,-1])}}export{le as load};
